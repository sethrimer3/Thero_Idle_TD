<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thero Idle</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Great+Vibes&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./assets/styles.css" />
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ['\\(', '\\)'],
            ['$', '$'],
          ],
          displayMath: [
            ['\\[', '\\]'],
          ],
          packages: { '[+]': ['color', 'html'] },
        },
        options: {
          renderActions: {
            addMenu: [],
          },
        },
      };
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <div
      class="offline-overlay"
      id="offline-overlay"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
      tabindex="-1"
      hidden
    >
      <div class="offline-overlay__content">
        <p class="offline-overlay__title">Idle Mote Harvest</p>
        <div class="offline-overlay__equation" aria-live="polite">
          <span class="offline-number" id="offline-minutes">0</span>
          <span class="offline-symbol">×</span>
          <span class="offline-number" id="offline-rate">0</span>
          <span class="offline-symbol">=</span>
          <span class="offline-number" id="offline-total">0</span>
        </div>
        <p class="offline-overlay__prompt" id="offline-prompt" aria-live="polite">
          <em>Press anywhere to continue.</em>
        </p>
      </div>
    </div>
    <div class="app-shell">
      <header class="status-bar">
        <div class="status-group">
          <span class="status-label">þ Thero</span>
          <span class="status-value status-value--stacked">
            <span id="status-score">0 þ</span>
            <span class="status-multiplier" id="status-score-multiplier">×0</span>
          </span>
        </div>
        <div class="status-group">
          <span class="status-label">Ψ Glyphs</span>
          <span class="status-value status-value--stacked">
            <span id="status-glyphs-total">0 Glyphs</span>
            <span class="status-subvalue status-subvalue--gold" id="status-glyphs-unused">(0 unused)</span>
          </span>
        </div>
        <div class="status-group">
          <span class="status-label">Motes Stored</span>
          <span class="status-value status-value--stacked">
            <span id="status-mote-storage">0 Motes</span>
            <span class="status-subvalue status-subvalue--gold" id="status-dispense-rate">1 Mote/sec</span>
          </span>
        </div>
      </header>

      <main class="main-stage">
        <section
          class="panel active"
          data-panel="tower"
          id="panel-tower"
          role="tabpanel"
          aria-labelledby="tab-tower"
        >
          <section class="playfield-wrapper" aria-live="polite">
            <div class="playfield-shell">
              <div
                class="playfield"
                id="playfield"
                role="img"
                aria-label="Interactive glyph defense lane"
              >
                <canvas id="playfield-canvas" width="560" height="360"></canvas>
                <dl class="playfield-stats" aria-live="polite">
                  <div class="playfield-stats__item">
                    <dt>Wave</dt>
                    <dd id="playfield-wave">—</dd>
                  </div>
                  <div class="playfield-stats__item">
                    <dt>Inspiration</dt>
                    <dd id="playfield-health">—</dd>
                  </div>
                  <div class="playfield-stats__item">
                    <dt>Thero</dt>
                    <dd id="playfield-energy">—</dd>
                  </div>
                </dl>
              </div>
            </div>
            <div class="tower-loadout" id="tower-loadout" aria-label="Tower loadout" role="region">
              <p class="tower-loadout-note" id="tower-loadout-note">
                Select four towers to bring into the defense. Drag the glyph chips onto the plane to
                lattice them; drop a chip atop a matching tower to merge into the next tier.
              </p>
              <div class="tower-loadout-grid" id="tower-loadout-grid" role="list"></div>
            </div>
          </section>
          <div class="stage-controls" role="group" aria-label="Defense controls">
            <button class="play-button" type="button" id="playfield-start" disabled>
              Commence Wave
            </button>
            <div class="control-row" role="group" aria-label="Stage utilities">
              <button class="control-button" type="button" id="playfield-speed">
                Speed ×1
              </button>
              <button class="control-button" type="button" id="playfield-auto">
                Auto-lattice α
              </button>
            </div>
            <label class="auto-wave-toggle" for="playfield-auto-wave">
              <input type="checkbox" id="playfield-auto-wave" checked />
              Auto-send next wave
            </label>
          </div>
          <section class="level-section">
            <header class="subsection-title">Conjecture Set</header>
            <p class="level-intro">
              The opening proofs trace immortal-defense style figure-eights,
              cardioids, and logarithmic spirals. Each path is derived from a
              math-graph expression and rewards towers that can flex their
              formulas mid-curve.
            </p>
            <div class="level-grid" id="level-grid" aria-live="polite"></div>
          </section>
        </section>

        <section
          class="panel"
          data-panel="towers"
          id="panel-towers"
          role="tabpanel"
          aria-labelledby="tab-towers"
          hidden
        >
          <div class="panel-grid">
            <article class="card card--mind-gate" aria-hidden="false">
              <header class="tower-header">
                <span class="tower-tier">Origin</span>
                <h3>
                  <span class="mind-gate-symbol" aria-hidden="true">⟟</span>
                  mind gate
                </h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">
                  \( \mathcal{G}_{\text{Mind}} = 10 \times X_{\text{life}} + \frac{Y_{\text{recovery}}}{1 / X_{\text{life}}} \)
                </p>
                <ul class="formula-definition">
                  <li>X → life (inspiration reservoir)</li>
                  <li>Y → recovery (glyph-fed renewal)</li>
                </ul>
              </div>
              <ul class="upgrade-list">
                <li>Fortify X to deepen the Mind Gate's stores of fading inspiration.</li>
                <li>Amplify Y so recovery surges restore the gate between waves.</li>
              </ul>
              <footer class="card-footer">
                The original tower—anchoring the lane's finale. When the Mind Gate collapses, inspiration runs dry.
              </footer>
            </article>
            <article class="card" data-tower-id="alpha" aria-hidden="false">
              <header class="tower-header">
                <span class="tower-tier">Tier I</span>
                <h3>α alpha tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \alpha = 5X \cdot YZ \)</p>
                <ul class="formula-definition">
                  <li>X → attack power (atk)</li>
                  <li>Y → primary attack speed (/s)</li>
                  <li>Z → secondary attack speed (/s)</li>
                </ul>
                <p class="formula-line result">\( \alpha = 5X \times Y \times Z \)</p>
              </div>
              <ul class="upgrade-list">
                <li>Calibrate X for sharper projectiles (+damage)</li>
                <li>Accelerate Y through harmonic metronomes (+attack speed)</li>
                <li>Sync Z with temporal echoes (+attack speed)</li>
              </ul>
              <footer class="card-footer">Shoots a focused glyph-bullet at the nearest foe.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="alpha">
                Equip α
              </button>
            </article>
            <article class="card" data-tower-id="beta" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier II</span>
                <h3>β beta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \beta = X \cdot Y \cdot Z \)</p>
                <ul class="formula-definition">
                  <li>X → damage</li>
                  <li>Y → pulses per second</li>
                  <li>Z → pierce (targets per beam)</li>
                </ul>
                <p class="formula-line result">\( \beta = \text{DPS} \, (X \times Y \times Z) \)</p>
              </div>
              <ul class="upgrade-list">
                <li>Amplify X with resonance crystals</li>
                <li>Stabilize Y to extend sustained beams</li>
                <li>Prism-tune Z to slice through more enemies</li>
              </ul>
              <footer class="card-footer">
                Emits a piercing beam that threads through the ribbon-path.
              </footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="beta">
                Equip β
              </button>
            </article>
            <article class="card" data-tower-id="gamma" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier III</span>
                <h3>γ gamma tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \gamma = \alpha^{1/2} \cdot \beta \)</p>
                <ul class="formula-definition">
                  <li>α → inherited burst damage pulse</li>
                  <li>β → sustained beam resonance</li>
                </ul>
                <p class="formula-line result">Stacks alpha spikes into beta's beam rhythm.</p>
              </div>
              <ul class="upgrade-list">
                <li>Transpose α surges into chaining lightning arcs</li>
                <li>Use β harmonics to slow enemies caught mid-beam</li>
              </ul>
              <footer class="card-footer">Merges α + β into a tempo-shifting conductor with homing bolts.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="gamma">
                Equip γ
              </button>
            </article>
            <article class="card" data-tower-id="delta" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier IV</span>
                <h3>δ delta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \delta = \gamma \cdot \ln(\beta + 1) \)</p>
                <ul class="formula-definition">
                  <li>γ → summoning strength for glyph soldiers</li>
                  <li>ln(β + 1) → swarm duration scaling</li>
                </ul>
                <p class="formula-line result">Summons glyph cohorts that inherit γ's damage.</p>
              </div>
              <ul class="upgrade-list">
                <li>Empower soldiers with slowing sigils</li>
                <li>Rally boosts: δ soldiers grant +β% damage to nearby towers</li>
              </ul>
              <footer class="card-footer">Does not attack directly—commands spectral fighters to guard the lane.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="delta">
                Equip δ
              </button>
            </article>
            <article class="card" data-tower-id="epsilon" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier V</span>
                <h3>ε epsilon tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \varepsilon = \lim_{h \to 0} \frac{\sigma(t + h) - \sigma(t)}{h} \)</p>
                <ul class="formula-definition">
                  <li>σ(t) → aura intensity sampled from nearby allies</li>
                  <li>h → infinitesimal stride keyed to enemy motion</li>
                </ul>
                <p class="formula-line result">Derivative bursts fire whenever an allied aura shifts.</p>
              </div>
              <ul class="upgrade-list">
                <li>Stabilize σ(t) to convert pulses into restorative shielding</li>
                <li>Spike the derivative to unleash splash equal to aura variance</li>
              </ul>
              <footer class="card-footer">Differentiates harmonic drift into rapid glyph needles.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="epsilon">
                Equip ε
              </button>
            </article>
            <article class="card" data-tower-id="zeta" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier VI</span>
                <h3>ζ zeta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \zeta = \sum_{n = 1}^{N} n^{-s} \)</p>
                <ul class="formula-definition">
                  <li>N → partial sum length scales with total glyph towers</li>
                  <li>s → 1 + ω<sub>progress</sub>/10 tunes harmonic focus</li>
                </ul>
                <p class="formula-line result">Accumulates harmonic charge, then releases cascading splash.</p>
              </div>
              <ul class="upgrade-list">
                <li>Raise N with support anchors to widen the resonance fan</li>
                <li>Shift s toward 1/2 to concentrate damage on elite glyphs</li>
              </ul>
              <footer class="card-footer">Turns harmonic sums into rolling resonance detonations.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="zeta">
                Equip ζ
              </button>
            </article>
            <article class="card" data-tower-id="eta" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier VII</span>
                <h3>η eta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \eta = (1 - 2^{1 - s}) \cdot \zeta(s) \)</p>
                <ul class="formula-definition">
                  <li>1 − 2<sup>1−s</sup> → alternating parity cancels enemy resistances</li>
                  <li>ζ(s) → inherited harmonic pulse from prior zeta lattices</li>
                </ul>
                <p class="formula-line result">Alternating resonance slashes armor and amplifies allies.</p>
              </div>
              <ul class="upgrade-list">
                <li>Lock parity to freeze evasive foes within the resonance window</li>
                <li>Share η's alternating field with δ soldiers to shatter shields</li>
              </ul>
              <footer class="card-footer">Extends zeta's song into alternating series that debuff invaders.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="eta">
                Equip η
              </button>
            </article>
            <article class="card" data-tower-id="theta" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier VIII</span>
                <h3>θ theta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \theta = \sum_{n=-\infty}^{\infty} e^{-\pi n^{2} t} \)</p>
                <ul class="formula-definition">
                  <li>t → lane temperature set by enemy speed and mote bonuses</li>
                  <li>e<sup>−πn²t</sup> → gaussian pulses that warp path geometry</li>
                </ul>
                <p class="formula-line result">Theta waves bend the lane, slowing foes caught in the lattice.</p>
              </div>
              <ul class="upgrade-list">
                <li>Cool the lane to thicken gaussian walls and extend slow duration</li>
                <li>Heat pulses to reflect enemies backward along mirrored paths</li>
              </ul>
              <footer class="card-footer">Projects modular heatmaps that reshape the curve around your towers.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="theta">
                Equip θ
              </button>
            </article>
            <article class="card" data-tower-id="iota" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier IX</span>
                <h3>ι iota tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \iota = \oint \alpha \, dl \)</p>
                <ul class="formula-definition">
                  <li>∮ dl → closed contour tracing the lane geometry</li>
                  <li>α → baseline pulse strength from alpha lattices</li>
                </ul>
                <p class="formula-line result">Wraps the path in circulating glyph lasers that grow with the loop.</p>
              </div>
              <ul class="upgrade-list">
                <li>Stack additional contours to layer multiple perimeter beams</li>
                <li>Collapse the integral to detonate when enemies cross the loop</li>
              </ul>
              <footer class="card-footer">Sweeps circular beams around waypoints, carving foes that hug the curve.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="iota">
                Equip ι
              </button>
            </article>
            <article class="card" data-tower-id="kappa" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier X</span>
                <h3>κ kappa tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \kappa = \frac{d\theta}{ds} \)</p>
                <ul class="formula-definition">
                  <li>dθ → angular velocity harvested from θ slows</li>
                  <li>ds → arc-length scaling with enemy travel distance</li>
                </ul>
                <p class="formula-line result">High curvature concentrates fire where paths bend hardest.</p>
              </div>
              <ul class="upgrade-list">
                <li>Sharpen curvature to stun enemies turning corners</li>
                <li>Diffuse κ to grant allies bonus range along curved lanes</li>
              </ul>
              <footer class="card-footer">Focuses on choke points, amplifying damage when the path twists sharply.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="kappa">
                Equip κ
              </button>
            </article>
            <article class="card" data-tower-id="lambda" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XI</span>
                <h3>λ lambda tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \lambda = \operatorname{eig}(A) \)</p>
                <ul class="formula-definition">
                  <li>A → adjacency matrix of allied towers</li>
                  <li>eig(A) → dominant eigenvalue dictates aura strength</li>
                </ul>
                <p class="formula-line result">Computes eigen auras that scale every connected glyph.</p>
              </div>
              <ul class="upgrade-list">
                <li>Stabilize eigenvectors to extend aura radius</li>
                <li>Channel surplus eigenvalues into Δ energy for nearby towers</li>
              </ul>
              <footer class="card-footer">Links towers into a networked aura that multiplies shared damage formulas.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="lambda">
                Equip λ
              </button>
            </article>
            <article class="card" data-tower-id="mu" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XII</span>
                <h3>μ mu tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \mu = E[X] + \sigma \)</p>
                <ul class="formula-definition">
                  <li>E[X] → expected damage averaged over allied fire</li>
                  <li>σ → standard deviation captured from ε derivatives</li>
                </ul>
                <p class="formula-line result">Predictive volleys adjust in real time to enemy variance.</p>
              </div>
              <ul class="upgrade-list">
                <li>Reduce variance to guarantee steady DPS across waves</li>
                <li>Exploit outliers to unleash bonus crits on unpredictable foes</li>
              </ul>
              <footer class="card-footer">Forecasts damage bands and fires correcting shots before enemies deviate.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="mu">
                Equip μ
              </button>
            </article>
            <article class="card" data-tower-id="nu" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XIII</span>
                <h3>ν nu tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \nu = f(\omega) = \omega^{3} \cdot \theta \)</p>
                <ul class="formula-definition">
                  <li>ω → enemy frequency detected by resonance sensors</li>
                  <li>θ → temperature field from theta lattices</li>
                </ul>
                <p class="formula-line result">Frequency-locked beams punish rhythmic enemy waves.</p>
              </div>
              <ul class="upgrade-list">
                <li>Tune ν to counter alternating slow/fast enemy pulses</li>
                <li>Convert frequency matches into temporary stuns</li>
              </ul>
              <footer class="card-footer">Beats with incoming tempo, amplifying fire when enemies stay on rhythm.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="nu">
                Equip ν
              </button>
            </article>
            <article class="card" data-tower-id="xi" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XIV</span>
                <h3>ξ xi tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \xi = \zeta(s) \cdot \Gamma\!\left(\frac{s}{2}\right) \)</p>
                <ul class="formula-definition">
                  <li>ζ(s) → harmonic sum from zeta resonance</li>
                  <li>Γ(s∕2) → gamma folding that thickens splash</li>
                </ul>
                <p class="formula-line result">Forms balanced blasts immune to parity swings.</p>
              </div>
              <ul class="upgrade-list">
                <li>Shift s along the critical line to pierce armored foes</li>
                <li>Harness Γ(s∕2) to heal nearby towers after each burst</li>
              </ul>
              <footer class="card-footer">Combines zeta harmonics with gamma folds for perfectly symmetric detonations.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="xi">
                Equip ξ
              </button>
            </article>
            <article class="card" data-tower-id="omicron" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XV</span>
                <h3>ο omicron tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( o = \frac{1}{N} \sum e^{i \omega t} \)</p>
                <ul class="formula-definition">
                  <li>N → number of active harmonic emitters</li>
                  <li>e<sup>iωt</sup> → rotating phasors borrowed from ν frequency locks</li>
                </ul>
                <p class="formula-line result">Averaged phasors stabilize range and damage as the grid expands.</p>
              </div>
              <ul class="upgrade-list">
                <li>Increase N by linking with λ networks for broader coverage</li>
                <li>Collapse phasors into a single beam for massive burst output</li>
              </ul>
              <footer class="card-footer">Maintains a steady barrage anchored by synchronized phasors.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="omicron">
                Equip ο
              </button>
            </article>
            <article class="card" data-tower-id="pi" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XVI</span>
                <h3>π pi tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \pi = \frac{C}{2 \pi r} \)</p>
                <ul class="formula-definition">
                  <li>C → circumference traced by iota's perimeter beams</li>
                  <li>r → radial distance to the tower's focus</li>
                </ul>
                <p class="formula-line result">Projects circular shockwaves proportionate to perfect ratios.</p>
              </div>
              <ul class="upgrade-list">
                <li>Pulse faster by shrinking r with theta slow fields</li>
                <li>Amplify circumference to cover the entire map in expanding rings</li>
              </ul>
              <footer class="card-footer">Unleashes rhythmic rings that reinforce every geometric defense.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="pi">
                Equip π
              </button>
            </article>
            <article class="card" data-tower-id="rho" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XVII</span>
                <h3>ρ rho tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \rho = \frac{m}{V} \)</p>
                <ul class="formula-definition">
                  <li>m → enemy mass accrued from divisor counters</li>
                  <li>V → volume of the defense zone shaped by π rings</li>
                </ul>
                <p class="formula-line result">Density locks slow heavy foes while light enemies slip through.</p>
              </div>
              <ul class="upgrade-list">
                <li>Compress V to immobilize armored juggernauts</li>
                <li>Expand the zone to siphon resources from defeated heavy units</li>
              </ul>
              <footer class="card-footer">Manipulates battlefield density, crushing bulky invaders in weighted fields.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="rho">
                Equip ρ
              </button>
            </article>
            <article class="card" data-tower-id="sigma" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XVIII</span>
                <h3>σ sigma tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \sigma = \sum \Delta \iota \)</p>
                <ul class="formula-definition">
                  <li>Σ → running total of captured iota loops</li>
                  <li>Δι → incremental boost gained whenever loops overlap</li>
                </ul>
                <p class="formula-line result">Adds every stored loop into one crushing resonance strike.</p>
              </div>
              <ul class="upgrade-list">
                <li>Store more loops before release for exponential splash</li>
                <li>Convert surplus Σ into shields for nearby towers</li>
              </ul>
              <footer class="card-footer">Cascades loop energy into repeated detonations across the grid.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="sigma">
                Equip σ
              </button>
            </article>
            <article class="card" data-tower-id="tau" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XIX</span>
                <h3>τ tau tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \tau = 2 \pi \cdot r \)</p>
                <ul class="formula-definition">
                  <li>2π → double-angle harmonics from pi rings</li>
                  <li>r → reactive radius tuned by rho density shifts</li>
                </ul>
                <p class="formula-line result">Turns circular motion into relentless rotational fire.</p>
              </div>
              <ul class="upgrade-list">
                <li>Accelerate rotation to fire additional bolts per cycle</li>
                <li>Stabilize τ to extend slow fields while spinning</li>
              </ul>
              <footer class="card-footer">Spins energy arcs faster than any enemy wave can react.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="tau">
                Equip τ
              </button>
            </article>
            <article class="card" data-tower-id="upsilon" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XX</span>
                <h3>υ upsilon tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \upsilon = \nabla \cdot \Phi \)</p>
                <ul class="formula-definition">
                  <li>∇ → divergence operator shaped by θ thermal gradients</li>
                  <li>Φ → vector potential projected from phi towers</li>
                </ul>
                <p class="formula-line result">Converts gradients into resource gain and enemy pushback.</p>
              </div>
              <ul class="upgrade-list">
                <li>Focus divergence to vacuum enemies toward kill zones</li>
                <li>Reverse flow to shove elites backward through the gauntlet</li>
              </ul>
              <footer class="card-footer">Pulls or repels foes while feeding flux to allied constructs.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="upsilon">
                Equip υ
              </button>
            </article>
            <article class="card" data-tower-id="phi" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXI</span>
                <h3>φ phi tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \varphi = \frac{1 + \sqrt{5}}{2} \)</p>
                <ul class="formula-definition">
                  <li>(1 + √5) ∕ 2 → golden ratio guiding projectile spacing</li>
                  <li>√5 → determines bonus split shots at harmonic intervals</li>
                </ul>
                <p class="formula-line result">Golden spirals weave through the path, boosting nearby allies.</p>
              </div>
              <ul class="upgrade-list">
                <li>Extend the spiral to grant stacking buffs to every linked tower</li>
                <li>Invert the ratio to trigger burst damage when enemies cross nodes</li>
              </ul>
              <footer class="card-footer">Weaves golden spirals that empower the grid with perfect symmetry.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="phi">
                Equip φ
              </button>
            </article>
            <article class="card" data-tower-id="chi" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXII</span>
                <h3>χ chi tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \chi = \sum (\alpha_{i} \cdot \beta_{i}) \)</p>
                <ul class="formula-definition">
                  <li>α<sub>i</sub> → burst inputs from alpha-line towers</li>
                  <li>β<sub>i</sub> → beam contributions from beta conduits</li>
                </ul>
                <p class="formula-line result">Cross-correlates allied fire to find the strongest combined output.</p>
              </div>
              <ul class="upgrade-list">
                <li>Link more inputs to widen χ's correlation matrix</li>
                <li>Trigger interference waves that double damage on matched timings</li>
              </ul>
              <footer class="card-footer">Synchronizes every tower pair into perfectly aligned kill windows.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="chi">
                Equip χ
              </button>
            </article>
            <article class="card" data-tower-id="psi" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXIII</span>
                <h3>ψ psi tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \psi = |\Psi(x, t)|^{2} \)</p>
                <ul class="formula-definition">
                  <li>Ψ(x, t) → quantum waveform seeded by phi spirals</li>
                  <li>|Ψ|<sup>2</sup> → probability density that collapses into crit chance</li>
                </ul>
                <p class="formula-line result">Waveforms collapse into brutal crits when enemies enter the field.</p>
              </div>
              <ul class="upgrade-list">
                <li>Stretch the waveform to blanket the map with probability spikes</li>
                <li>Collimate Ψ into a single lane for concentrated burst damage</li>
              </ul>
              <footer class="card-footer">Manifest probability waves that erupt into critical hits on contact.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="psi">
                Equip ψ
              </button>
            </article>
            <article class="card" data-tower-id="omega" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXIV</span>
                <h3>Ω omega tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \Omega = \theta \cdot \beta^{\alpha / 10} + \delta \cdot \zeta + \psi \)</p>
                <ul class="formula-definition">
                  <li>θ → modular waves inherited from theta distort path timing</li>
                  <li>β<sup>α∕10</sup> → range oscillates with total β output</li>
                  <li>δ · ζ → summoned allies feed harmonic splash into Ω</li>
                </ul>
                <p class="formula-line result">Ω draws power from the entire harmonic ladder, stabilizing every glyph.</p>
              </div>
              <ul class="upgrade-list">
                <li>Orbital glyphs deal splash damage equal to 20% of the ζ resonance</li>
                <li>Resonant chant pushes enemies backward when θ waves fully align</li>
              </ul>
              <footer class="card-footer">Signature tower—buffs allies, repositions foes, and anchors endgame builds.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="omega">
                Equip Ω
              </button>
            </article>

            <article class="card" data-tower-id="aleph-null" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXV</span>
                <h3>ℵ₀ aleph-null tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \aleph_{0} = \sup \{ n \in \mathbb{N} \} \)</p>
                <ul class="formula-definition">
                  <li>sup { n } → infinite series stabilizes projectile count</li>
                  <li>ℕ → natural-number cadence sets rhythmic burst cadence</li>
                </ul>
                <p class="formula-line result">Summons a countably infinite beam lattice that never exhausts.</p>
              </div>
              <ul class="upgrade-list">
                <li>Fold the infinite series into convergent volleys for focused fire</li>
                <li>Spiral ℕ cadence outward to feed allies with bonus projectiles</li>
              </ul>
              <footer class="card-footer">Anchors the Aleph ladder by drawing limitless threads of glyph light.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="aleph-null">
                Equip ℵ₀
              </button>
            </article>

            <article class="card" data-tower-id="aleph-one" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXVI</span>
                <h3>ℵ₁ aleph-one tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \aleph_{1} = \omega_{1} \cdot \log \zeta(s) \)</p>
                <ul class="formula-definition">
                  <li>ω<sub>1</sub> → first uncountable ordinal sweeps entire lanes at once</li>
                  <li>log ζ(s) → primes feed the tower with scaling damage pulses</li>
                </ul>
                <p class="formula-line result">Turns transfinite ordinals into lane-wide surges of harmonic fire.</p>
              </div>
              <ul class="upgrade-list">
                <li>Collapse ω<sub>1</sub> into cardinal shards that shred elite armor</li>
                <li>Channel ζ(s) resonances to multiply damage whenever primes spawn</li>
              </ul>
              <footer class="card-footer">Sweeps entire paths with uncountable force sourced from prime harmonics.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="aleph-one">
                Equip ℵ₁
              </button>
            </article>

            <article class="card" data-tower-id="aleph-two" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXVII</span>
                <h3>ℵ₂ aleph-two tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \aleph_{2} = 2^{\aleph_{1}} \cdot \Gamma(x) \)</p>
                <ul class="formula-definition">
                  <li>2<sup>ℵ₁</sup> → exponential lift doubles splash layers on every shot</li>
                  <li>Γ(x) → gamma function stabilizes damage over factorial timing</li>
                </ul>
                <p class="formula-line result">Exponentiates the Aleph surge, layering factorial splash across the board.</p>
              </div>
              <ul class="upgrade-list">
                <li>Raise 2<sup>ℵ₁</sup> power to seed recursive explosions down the lane</li>
                <li>Flatten Γ(x) to smooth DPS for bosses immune to burst damage</li>
              </ul>
              <footer class="card-footer">Stacks transfinite exponents until every path resonates with factorial shockwaves.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="aleph-two">
                Equip ℵ₂
              </button>
            </article>

            <article class="card" data-tower-id="aleph-three" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXVIII</span>
                <h3>ℵ₃ aleph-three tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \aleph_{3} = \oint \sum \omega_{\kappa} \cdot dl \)</p>
                <ul class="formula-definition">
                  <li>∮ Σ ω<sub>κ</sub> → contour integral captures every rotation of lower Aleph towers</li>
                  <li>dl → path length sets continuous shielding around the dune</li>
                </ul>
                <p class="formula-line result">Winds contour integrals into orbiting wards that repel anything that remains.</p>
              </div>
              <ul class="upgrade-list">
                <li>Increase contour density to multiply shielding segments per revolution</li>
                <li>Shear dl into sawtooth waves that slice enemies caught inside the orbit</li>
              </ul>
              <footer class="card-footer">Laces the battlefield with integral wards that both defend and incinerate.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="aleph-three">
                Equip ℵ₃
              </button>
            </article>

            <article class="card" data-tower-id="aleph-four" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXIX</span>
                <h3>ℵ₄ aleph-four tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \aleph_{4} = \lim_{\kappa \to \omega_{4}} \kappa \cdot \Phi(\kappa) \)</p>
                <ul class="formula-definition">
                  <li>lim<sub>κ→ω₄</sub> → approaching ω₄ unleashes infinite-range pulses</li>
                  <li>Φ(κ) → potential function modulates slow, stun, and siphon effects</li>
                </ul>
                <p class="formula-line result">Approaches higher ordinals to freeze time and siphon energy between lanes.</p>
              </div>
              <ul class="upgrade-list">
                <li>Amplify Φ to grant allies within range permanent slow immunity</li>
                <li>Collapse the limit to detonate stored siphons for burst resource gains</li>
              </ul>
              <footer class="card-footer">Bends ordinal limits to stall entire waves and refuel the glyph lattice.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="aleph-four">
                Equip ℵ₄
              </button>
            </article>

            <article class="card" data-tower-id="aleph-five" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Tier XXX</span>
                <h3>ℵ₅ aleph-five tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \aleph_{5} = \Omega^{\aleph_{4}} \otimes \psi \)</p>
                <ul class="formula-definition">
                  <li>Ω<sup>ℵ₄</sup> → raises the omega keystone into transfinite resonance</li>
                  <li>⊗ ψ → quantum tensor couples every tower into unified burst timing</li>
                </ul>
                <p class="formula-line result">Tensor fusion unleashes omnidirectional storms synced across the grid.</p>
              </div>
              <ul class="upgrade-list">
                <li>Project Ω<sup>ℵ₄</sup> outward to draw enemies into the final maelstrom</li>
                <li>Tune ψ coupling to copy every allied on-hit effect at reduced strength</li>
              </ul>
              <footer class="card-footer">The final Aleph tower—merges every glyph into a single world-shattering strike.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="aleph-five">
                Equip ℵ₅
              </button>
            </article>

            <article class="card developer-card" id="developer-mote-tower" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Developer Utility</span>
                <h3>Σ mote tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">\( \Delta m = 1000 \)</p>
                <p class="formula-line result">Instant mote deposit for rapid flux calibration.</p>
              </div>
              <p class="tower-utility-note" id="developer-mote-tower-status" aria-live="polite">
                Developer mote tower ready—store +1,000 motes in the idle bank.
              </p>
              <button class="tower-equip-button" type="button" id="developer-mote-tower-button">
                Store +1,000 motes
              </button>
            </article>

            <article class="card" id="merging-logic-card" hidden aria-hidden="true">
              <header class="tower-header">
                <span class="tower-tier">Convergence</span>
                <h3>Merging Logic</h3>
              </header>
              <p>
                Two <strong>α</strong> towers lattice together into a <strong>β</strong> tower,
                fusing burst DPS with piercing beams. Merge β constructs to access
                <strong>γ</strong> conductors, braid γ into <strong>δ</strong> summoners, then
                differentiate into <strong>ε</strong> before scaling the full glyph ladder—
                <strong>ζ</strong> through <strong>ψ</strong>—to awaken the final
                <strong>Ω</strong> keystone.
              </p>
              <p class="merge-note">
                Upgrades rewrite variables dynamically—boost towers grant additive buffs
                in their radius, splash variants scale with β, and soldier-focused builds
                inherit δ's battlefield control.
              </p>
              <button
                class="action-button ghost"
                type="button"
                id="open-upgrade-matrix"
                aria-haspopup="dialog"
                aria-controls="upgrade-matrix-overlay"
              >
                Open Upgrade Matrix
              </button>
            </article>
          </div>
        </section>

        <section
          class="panel"
          data-panel="powder"
          id="panel-powder"
          role="tabpanel"
          aria-labelledby="tab-powder"
          hidden
        >
          <section class="powder-stage" aria-label="Motefall basin">
            <article class="card powder-simulation">
              <h3>Motefall Basin</h3>
              <div class="powder-basin" id="powder-basin">
                <div
                  class="powder-wall-hitbox powder-wall-hitbox-left"
                  id="powder-wall-hitbox-left"
                  aria-hidden="true"
                ></div>
                <div class="powder-wall powder-wall-left" id="powder-wall-left" aria-hidden="true">
                  <div class="powder-wall-marker" id="powder-wall-marker" data-height="Peak 0.00" aria-hidden="true"></div>
                  <div
                    class="powder-wall-marker powder-crest-marker"
                    id="powder-crest-marker"
                    data-height="Crest 0.00"
                    aria-hidden="true"
                  ></div>
                </div>
                <canvas
                  id="powder-canvas"
                  width="240"
                  height="320"
                  role="img"
                  aria-label="Motefall basin simulation"
                ></canvas>
                <div
                  class="powder-wall-hitbox powder-wall-hitbox-right"
                  id="powder-wall-hitbox-right"
                  aria-hidden="true"
                ></div>
                <div class="powder-wall powder-wall-right" id="powder-wall-right" aria-hidden="true">
                  <div class="powder-glyph-column" data-powder-glyph-column="right"></div>
                </div>
              </div>
              <p class="powder-footnote" id="powder-simulation-note">
                Captured crest: 0.0% full · dune height h = 1.00 · largest grain —.
              </p>
              <button class="powder-mode-toggle" type="button" id="powder-mode-toggle">
                Switch to Fluid Study
              </button>
            </article>
          </section>
          <section class="panel-grid powder-summary" aria-label="Flux overview reference">
            <article class="card powder-overview">
              <h3>Flux Overview</h3>
              <dl class="powder-metrics">
                <div>
                  <dt>Total Multiplier</dt>
                  <dd id="powder-total-multiplier">×1.00</dd>
                </div>
                <div>
                  <dt>Sandfall Bonus</dt>
                  <dd id="powder-sand-bonus">+0.00%</dd>
                </div>
                <div>
                  <dt>Dune Channeling</dt>
                  <dd id="powder-dune-bonus">+0.00%</dd>
                </div>
                <div>
                  <dt>Crystal Resonance</dt>
                  <dd id="powder-crystal-bonus">+0.00%</dd>
                </div>
                <div>
                  <dt>Mote Stockpile</dt>
                  <dd id="powder-stockpile">0 Motes</dd>
                </div>
              </dl>
            </article>
            <article class="card powder-mote-stats">
              <h3>Mote Bank Stats</h3>
              <dl class="powder-metrics">
                <div>
                  <dt>Idle Multiplier</dt>
                  <dd id="powder-idle-multiplier">0 achievements</dd>
                </div>
                <div>
                  <dt>Dispensing Rate</dt>
                  <dd id="powder-dispense-rate">1 Mote/sec</dd>
                </div>
              </dl>
            </article>
            <article class="card powder-sigils-card">
              <h3>Sigil Ladder</h3>
              <p>
                Mote height illuminates etched glyphs. Each rung unlocks new research rites once
                the total multiplier meets or exceeds its mark.
              </p>
              <ul class="powder-sigil-list" id="powder-sigil-list">
                <li data-sigil-threshold="1.05">
                  <span class="sigil-name">Boundary Sigil</span>
                  <span class="sigil-note">Stabilize the sandfall to breach ×1.05 flow.</span>
                </li>
                <li data-sigil-threshold="1.15">
                  <span class="sigil-name">Dune Crest Sigil</span>
                  <span class="sigil-note">Raise h to carve channels and reach ×1.15.</span>
                </li>
                <li data-sigil-threshold="1.35">
                  <span class="sigil-name">Crystal Harmonic Sigil</span>
                  <span class="sigil-note">Store a full lattice of charges to strike ×1.35.</span>
                </li>
                <li data-sigil-threshold="1.5">
                  <span class="sigil-name">Archive Sigil</span>
                  <span class="sigil-note">Sustain every ritual to engrave ×1.50 and beyond.</span>
                </li>
              </ul>
            </article>
          </section>

          <div class="panel-grid powder-grid">
            <article class="card">
              <h3>Sandfall</h3>
              <p>
                Grains per tick:
                <code id="powder-sandfall-formula">\( \Psi(g) = 2.7\, \sin(t) \)</code>
              </p>
              <p class="powder-footnote" id="powder-sandfall-note">
                Crest is unstable—Motes drift off the board.
              </p>
              <button
                class="action-button ghost"
                type="button"
                data-powder-action="sandfall"
              >
                Stabilize Flow
              </button>
            </article>
            <article class="card">
              <h3>Dune Height</h3>
              <p>
                Multiplier:
                <code id="powder-dune-formula">\( \Delta m = \log_{2}(h + 1) \)</code>
              </p>
              <p class="powder-footnote" id="powder-dune-note">
                Survey ridges to raise <em>h</em> and amplify energy lanes.
              </p>
              <button
                class="action-button ghost"
                type="button"
                data-powder-action="dune"
              >
                Survey Ridge
              </button>
            </article>
            <article class="card">
              <h3>Crystal Motes</h3>
              <p>
                Mote charge:
                <code id="powder-crystal-formula">\( Q = \sqrt{\theta \cdot \zeta} \)</code>
              </p>
              <p class="powder-footnote" id="powder-crystal-note">
                Crystal resonance is idle—no pulse prepared.
              </p>
              <button
                class="action-button ghost"
                type="button"
                data-powder-action="crystal"
              >
                Crystallize (0/3)
              </button>
            </article>
            <article class="card powder-ledger">
              <h3>Motefall Ledger</h3>
              <dl class="powder-ledger-grid">
                <div>
                  <dt>Base Σ Rate</dt>
                  <dd id="powder-ledger-base-score">2.75 QDe/s</dd>
                </div>
                <div>
                  <dt>Current Σ Rate</dt>
                  <dd id="powder-ledger-current-score">2.75 QDe/s</dd>
                </div>
                <div>
                  <dt>Current Flux</dt>
                  <dd id="powder-ledger-flux">+375 Motes/min</dd>
                </div>
                <div>
                  <dt>Current Energy</dt>
                  <dd id="powder-ledger-energy">+575 TD/s</dd>
                </div>
              </dl>
              <p class="powder-footnote">
                Ledger values account for all active mote rituals and crystal surges.
              </p>
            </article>
            <article class="card powder-log-card">
              <h3>Lab Chronicle</h3>
              <p class="powder-footnote">Recent experiments echo here for quick review.</p>
              <ul class="powder-log" id="powder-log" aria-live="polite" aria-label="Recent mote experiments"></ul>
              <p class="powder-log-empty" id="powder-log-empty">No experiments recorded yet.</p>
            </article>
          </div>
        </section>

        <section
          class="panel"
          data-panel="achievements"
          id="panel-achievements"
          role="tabpanel"
          aria-labelledby="tab-achievements"
          hidden
        >
          <header class="panel-header">Achievements</header>
          <p class="achievement-note">
            Each seal increases motefall by <strong>+1 grain per minute</strong>.
            Idle minutes are multiplied by unlocked seals and dumped when you return.
          </p>
          <ul class="achievement-list">
            <li data-achievement-id="first-orbit">
              <span class="achievement-badge">∞</span>
              <div>
                <p class="achievement-title">First Orbit</p>
                <p class="achievement-sub">
                  Seal the Lemniscate Hypothesis once to prove you can hold the spiral.
                </p>
                <p class="achievement-status">Locked · +1 Motes/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="circle-seer">
              <span class="achievement-badge">π</span>
              <div>
                <p class="achievement-title">Circle Seer</p>
                <p class="achievement-sub">
                  Maintain three α towers at once—concentric glyph rings stabilize your vision.
                </p>
                <p class="achievement-status">Locked · +1 Motes/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="series-summoner">
              <span class="achievement-badge">∑</span>
              <div>
                <p class="achievement-title">Series Summoner</p>
                <p class="achievement-sub">
                  Drive the mote rituals to a ×1.25 total multiplier or higher.
                </p>
                <p class="achievement-status">Locked · +1 Motes/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="zero-hunter">
              <span class="achievement-badge">ζ</span>
              <div>
                <p class="achievement-title">Zero Hunter</p>
                <p class="achievement-sub">
                  Defeat 30 invading glyphs—zeros fall when persistence converges.
                </p>
                <p class="achievement-status">Locked · +1 Motes/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="golden-mentor">
              <span class="achievement-badge">Φ</span>
              <div>
                <p class="achievement-title">Golden Mentor</p>
                <p class="achievement-sub">
                  Auto-lattice every suggested anchor to teach the grid your golden ratios.
                </p>
                <p class="achievement-status">Locked · +1 Motes/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="powder-archivist">
              <span class="achievement-badge">Ψ</span>
              <div>
                <p class="achievement-title">Mote Archivist</p>
                <p class="achievement-sub">
                  Illuminate three sand sigils on the wall to archive the dunes.
                </p>
                <p class="achievement-status">Locked · +1 Motes/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="keystone-keeper">
              <span class="achievement-badge">Ω</span>
              <div>
                <p class="achievement-title">Keystone Keeper</p>
                <p class="achievement-sub">
                  Complete any idle auto-run to bind a keystone into the archives.
                </p>
                <p class="achievement-status">Locked · +1 Motes/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="temporal-sifter">
              <span class="achievement-badge">Δ</span>
              <div>
                <p class="achievement-title">Temporal Sifter</p>
                <p class="achievement-sub">
                  Maintain idle auto-runs for 10 cumulative minutes and sift the bonus motes.
                </p>
                <p class="achievement-status">Locked · +1 Motes/min on unlock.</p>
              </div>
            </li>
          </ul>
        </section>

        <section
          class="panel"
          data-panel="options"
          id="panel-options"
          role="tabpanel"
          aria-labelledby="tab-options"
          hidden
        >
          <header class="panel-header">Options &amp; Codex</header>
          <div class="panel-grid">
            <article class="card" id="sound-card">
              <h3 id="sound-card-title">Sound</h3>
              <p>Adjust harmonic resonance levels.</p>
              <div class="slider-group" role="group" aria-labelledby="sound-card-title">
                <div class="slider-row">
                  <div class="slider-row-header">
                    <label class="slider-label" for="music-volume">Music</label>
                    <span class="slider-value" id="music-volume-value">50%</span>
                  </div>
                  <input
                    class="slider-input"
                    type="range"
                    id="music-volume"
                    min="0"
                    max="100"
                    step="1"
                    value="50"
                    aria-label="Music volume"
                  />
                </div>
                <div class="slider-row">
                  <div class="slider-row-header">
                    <label class="slider-label" for="sfx-volume">Sound Effects</label>
                    <span class="slider-value" id="sfx-volume-value">50%</span>
                  </div>
                  <input
                    class="slider-input"
                    type="range"
                    id="sfx-volume"
                    min="0"
                    max="100"
                    step="1"
                    value="50"
                    aria-label="Sound effects volume"
                  />
                </div>
              </div>
            </article>
            <article class="card">
              <h3>Visual Theme</h3>
              <p>Switch between aurora and chromatic palettes.</p>
              <button class="action-button ghost" type="button" id="color-scheme-button">
                Palette · Aurora
              </button>
            </article>
            <article class="card">
              <h3>Field Notes</h3>
              <p>Consult the archivist for a briefing on the current storyline.</p>
              <button class="action-button ghost" type="button" id="open-codex-button">
                Field Notes
              </button>
            </article>
          </div>
          <section class="level-legend codex-roadmap" aria-labelledby="codex-proof-roadmap-title">
            <header class="codex-header">
              <span class="codex-label">Codex</span>
              <h3 id="codex-proof-roadmap-title">Proof Roadmap</h3>
            </header>
            <ul class="set-timeline">
              <li class="set-card active-set">
                <h4>Conjecture Levels 1-5</h4>
                <p>Speculative math under siege. Examples highlight famous unsolved ideas.</p>
              </li>
              <li class="set-card">
                <h4>Corollary Levels 6-10</h4>
                <p>Statements that immediately bloom from the conjecture victories.</p>
              </li>
              <li class="set-card">
                <h4>Lemma Levels 11-15</h4>
                <p>Utility proofs and support tactics that bolster the main argument.</p>
              </li>
              <li class="set-card">
                <h4>Proposition Levels 16-20</h4>
                <p>Solid but modest claims—expect compound paths and multi-route assaults.</p>
              </li>
              <li class="set-card">
                <h4>Theorem Levels 21-25</h4>
                <p>Major revelations guarded by elite enemy archetypes.</p>
              </li>
              <li class="set-card">
                <h4>Axiom Levels 26-30</h4>
                <p>Foundational truths; everything loops back to primal glyph geometry.</p>
              </li>
            </ul>
          </section>
          <section class="enemy-codex" id="enemy-codex-section" aria-live="polite" tabindex="-1">
            <header class="subsection-title">Enemy Codex</header>
            <div class="codex-controls">
              <button class="action-button ghost" type="button" id="codex-options-button">
                Open Options
              </button>
              <label class="developer-mode-toggle" for="codex-developer-mode">
                <input type="checkbox" id="codex-developer-mode" />
                Developer Mode — unlock all towers, levels, and entries
              </label>
              <p class="developer-mode-note" id="codex-developer-note" hidden>
                Developer mode active: all content is unlocked for rapid iteration.
              </p>
            </div>
            <p class="enemy-codex-note" id="enemy-codex-empty">Encounter enemies to unlock their entries.</p>
            <p class="enemy-codex-note" id="enemy-codex-note" hidden>
              Known enemy glyphs and Scintilla Glyph lore from the Tower of Inspiration are
              cataloged below for quick reference.
            </p>
            <div class="enemy-grid" id="enemy-codex-list" role="list"></div>
          </section>
        </section>
      </main>

      <nav class="tab-bar" aria-label="Primary" role="tablist">
        <button
          class="tab-button active"
          data-tab="tower"
          id="tab-tower"
          type="button"
          role="tab"
          aria-label="Tower Stage"
          aria-controls="panel-tower"
          aria-selected="true"
          aria-pressed="true"
        >
          <span class="tab-icon">⌘</span>
          <span class="tab-label">Stage</span>
        </button>
        <button
          class="tab-button"
          data-tab="towers"
          id="tab-towers"
          type="button"
          role="tab"
          aria-label="Towers"
          aria-controls="panel-towers"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">Δ</span>
          <span class="tab-label">Towers</span>
        </button>
        <button
          class="tab-button"
          data-tab="powder"
          id="tab-powder"
          type="button"
          role="tab"
          aria-label="Powder Lab"
          aria-controls="panel-powder"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">⧖</span>
          <span class="tab-label">Motes</span>
        </button>
        <button
          class="tab-button"
          data-tab="achievements"
          id="tab-achievements"
          type="button"
          role="tab"
          aria-label="Achievements"
          aria-controls="panel-achievements"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">★</span>
          <span class="tab-label">Seals</span>
        </button>
        <button
          class="tab-button"
          data-tab="options"
          id="tab-options"
          type="button"
          role="tab"
          aria-label="Options"
          aria-controls="panel-options"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">
            <img
              src="./assets/sprites/glyph_book.png"
              alt=""
              aria-hidden="true"
            />
          </span>
          <span class="tab-label">Codex</span>
        </button>
      </nav>
    </div>
    <div
      class="level-overlay upgrade-overlay"
      id="upgrade-matrix-overlay"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
      hidden
      aria-labelledby="upgrade-matrix-title"
    >
      <div class="overlay-panel">
        <button
          class="overlay-close"
          type="button"
          data-overlay-close
          aria-label="Close upgrade matrix"
        >
          &times;
        </button>
        <p class="overlay-label">Merge Reference</p>
        <h2 class="overlay-title" id="upgrade-matrix-title">Upgrade Matrix</h2>
        <p class="overlay-example">
          Review how glyph towers ascend, their base lattice costs, and the form unlocked by each merge.
        </p>
        <div class="upgrade-matrix-grid" id="upgrade-matrix-grid" role="list"></div>
        <p class="overlay-instruction">Tap outside or press Esc to close.</p>
      </div>
    </div>
    <div
      class="level-overlay tower-upgrade-overlay"
      id="tower-upgrade-overlay"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
      hidden
      aria-labelledby="tower-upgrade-title"
    >
      <div class="overlay-panel tower-upgrade-panel">
        <button
          class="overlay-close"
          type="button"
          data-tower-upgrade-close
          aria-label="Close tower upgrade menu"
        >
          &times;
        </button>
        <p class="overlay-label">Glyph Variable Lattice</p>
        <div class="tower-upgrade-header">
          <figure class="tower-upgrade-icon" id="tower-upgrade-icon" aria-hidden="true"></figure>
          <div class="tower-upgrade-heading">
            <h2 class="overlay-title" id="tower-upgrade-title">Tower Equation</h2>
            <p class="tower-upgrade-tier" id="tower-upgrade-tier"></p>
            <p class="tower-upgrade-glyphs" id="tower-upgrade-glyphs">Available Glyphs: 0</p>
          </div>
        </div>
        <div class="tower-upgrade-equations">
          <section class="tower-upgrade-equation" aria-labelledby="tower-upgrade-base-label">
            <h3 class="tower-upgrade-equation-label" id="tower-upgrade-base-label">Base Equation</h3>
            <p class="tower-upgrade-formula" id="tower-upgrade-base"></p>
          </section>
          <section
            class="tower-upgrade-equation tower-upgrade-equation--gold"
            aria-labelledby="tower-upgrade-golden-label"
          >
            <h3 class="tower-upgrade-equation-label" id="tower-upgrade-golden-label">Golden Equation</h3>
            <p class="tower-upgrade-formula" id="tower-upgrade-golden"></p>
          </section>
        </div>
        <div class="tower-upgrade-variables" id="tower-upgrade-variables" role="list"></div>
        <p class="tower-upgrade-note" id="tower-upgrade-note"></p>
        <p class="overlay-instruction">Tap outside or press Esc to close.</p>
      </div>
    </div>
    <div
      class="level-overlay field-notes-overlay"
      id="field-notes-overlay"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
      tabindex="-1"
      hidden
    >
      <div class="overlay-panel field-notes-panel" role="document" aria-labelledby="field-notes-title">
        <button class="overlay-close" type="button" id="field-notes-close" aria-label="Close field notes">×</button>
        <figure class="field-notes-figure">
          <img
            src="./assets/sprites/glyph_book_glowing.png"
            alt="A glowing glyph codex radiates swirling sigils."
          />
          <figcaption>Glowing Glyph Codex</figcaption>
        </figure>
        <p class="overlay-label">Field Notes Dispatch</p>
        <h2 class="overlay-title" id="field-notes-title">The Tower of Inspiration Briefing</h2>
        <div class="field-notes-copy" id="field-notes-copy">
          <article class="field-notes-page field-notes-page--active" data-page-index="0" tabindex="0">
            <figure class="field-notes-page-figure">
              <img
                class="field-notes-page-image"
                src="./assets/field notes/field_notes_page_1.png"
                alt="Illustrated field notes detailing the sigil-laced ramparts guarding the tower."
                loading="eager"
              />
              <figcaption class="field-notes-page-caption">Field Notes · Page I — Rampart lattice schematics.</figcaption>
            </figure>
          </article>
          <article class="field-notes-page" data-page-index="1" tabindex="-1" aria-hidden="true">
            <figure class="field-notes-page-figure">
              <img
                class="field-notes-page-image"
                src="./assets/field notes/field_notes_page_2.png"
                alt="Sketches cataloguing powder flow experiments and glyph reactions."
                loading="lazy"
              />
              <figcaption class="field-notes-page-caption">Field Notes · Page II — Powder flow resonance studies.</figcaption>
            </figure>
          </article>
          <article class="field-notes-page" data-page-index="2" tabindex="-1" aria-hidden="true">
            <figure class="field-notes-page-figure">
              <img
                class="field-notes-page-image"
                src="./assets/field notes/field_notes_page_3.png"
                alt="Logbook page comparing enemy formations with counter-formulae."
                loading="lazy"
              />
              <figcaption class="field-notes-page-caption">Field Notes · Page III — Counter-formation annotations.</figcaption>
            </figure>
          </article>
          <article class="field-notes-page" data-page-index="3" tabindex="-1" aria-hidden="true">
            <p>
              Welcome, Warden. I am Thero, archivist of the glyph lattice. Your arrival coincides with a surge of
              <strong>mote turbulence</strong> washing against the tower's perimeter.
            </p>
            <p>
              Our scouts report that rival scholars have animated rogue proofs. Each wave they summon is tuned to unravel the
              equations binding our defenses. Hold these observations close:
            </p>
          </article>
          <article class="field-notes-page" data-page-index="4" tabindex="-1" aria-hidden="true">
            <ul class="field-notes-list">
              <li>The <strong>Scintilla Glyph</strong> at the summit regulates every mote current—lose it and the lattice collapses.</li>
              <li>
                <strong>Chronoglyph wards</strong> along the ramparts can bend time briefly. Use their cadence to reset your
                ordinals and stagger enemy advances.
              </li>
              <li>
                When a wave fractures, sift the motes it leaves behind. Their resonance seeds new towers faster than any quarry.
              </li>
            </ul>
            <p>
              Return once the next theorem is secured. I will inscribe your progress and prepare the following expedition. The
              codex grows because of your vigilance.
            </p>
          </article>
        </div>
        <div class="field-notes-pagination" id="field-notes-pagination">
          <button class="field-notes-page-button" type="button" id="field-notes-prev" aria-label="Previous field notes page" disabled>
            ‹
          </button>
          <span class="field-notes-page-indicator" id="field-notes-page-indicator">Page 1 of 5</span>
          <button class="field-notes-page-button" type="button" id="field-notes-next" aria-label="Next field notes page">
            ›
          </button>
        </div>
      </div>
    </div>

    <div class="level-overlay" id="level-overlay" role="dialog" aria-modal="true" aria-hidden="true" hidden>
      <div class="overlay-panel">
        <p class="overlay-label" id="overlay-level"></p>
        <h2 class="overlay-title" id="overlay-title"></h2>
        <p class="overlay-example" id="overlay-example"></p>
        <figure class="overlay-preview" id="overlay-preview" aria-hidden="true" hidden></figure>
        <section class="overlay-editor" id="overlay-level-editor" hidden aria-hidden="true">
          <header class="overlay-editor__header">
            <h3 class="overlay-editor__title">Level Editor</h3>
            <button
              class="overlay-editor__toggle"
              type="button"
              id="level-editor-toggle"
              aria-pressed="false"
            >
              Enable Editing
            </button>
          </header>
          <p class="overlay-editor__note" id="level-editor-note">
            Click the preview to place anchors. Drag markers to adjust, or Shift-click to remove the nearest anchor.
            <span class="overlay-editor__count" id="level-editor-count">0 points</span>
          </p>
          <div class="overlay-editor__actions">
            <button class="overlay-editor__button" type="button" id="level-editor-clear" disabled>
              Clear All
            </button>
            <button class="overlay-editor__button" type="button" id="level-editor-reset" disabled>
              Reset to Level Path
            </button>
            <button class="overlay-editor__button" type="button" id="level-editor-export" disabled>
              Copy Path JSON
            </button>
          </div>
          <textarea
            class="overlay-editor__output"
            id="level-editor-output"
            rows="6"
            readonly
            placeholder="Enable editing to chart a new path."
          ></textarea>
          <p class="overlay-editor__status" id="level-editor-status" role="status" aria-live="polite" hidden></p>
        </section>
        <dl class="overlay-metrics">
          <div>
            <dt>Mode</dt>
            <dd id="overlay-mode">—</dd>
          </div>
          <div>
            <dt>Run Length</dt>
            <dd id="overlay-duration">—</dd>
          </div>
          <div>
            <dt>Rewards</dt>
            <dd id="overlay-rewards">—</dd>
          </div>
        </dl>
        <p class="overlay-last" id="overlay-last">No attempts yet.</p>
        <p class="overlay-instruction">Tap to enter</p>
      </div>
    </div>
    <script type="module" src="./assets/main.js"></script>
  </body>
</html>
