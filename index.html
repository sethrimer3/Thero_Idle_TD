<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Glyph Defense Idle</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./assets/styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="status-bar">
        <div class="status-group">
          <span class="status-label">Σ Score</span>
          <span class="status-value" id="status-score">6.58 QDe</span>
        </div>
        <div class="status-group">
          <span class="status-label">Δ Energy</span>
          <span class="status-value" id="status-energy">+575 TD/s</span>
        </div>
        <div class="status-group">
          <span class="status-label">λ Flux</span>
          <span class="status-value" id="status-flux">+375 Powder/min</span>
        </div>
      </header>

      <main class="main-stage">
        <section
          class="panel active"
          data-panel="tower"
          id="panel-tower"
          role="tabpanel"
          aria-labelledby="tab-tower"
        >
          <div class="track-stage">
            <svg
              class="track-canvas"
              viewBox="0 0 560 360"
              role="img"
              aria-labelledby="track-title track-desc"
            >
              <title id="track-title">Whimsical enemy trajectory</title>
              <desc id="track-desc">
                Smooth, ribbon-like path inspired by glyph geometry for tower defense
              </desc>
              <defs>
                <linearGradient id="pathGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="rgba(139, 247, 255, 0.85)" />
                  <stop offset="50%" stop-color="rgba(255, 125, 235, 0.85)" />
                  <stop offset="100%" stop-color="rgba(255, 228, 120, 0.85)" />
                </linearGradient>
                <filter id="glow">
                  <feGaussianBlur stdDeviation="6" result="blur" />
                  <feMerge>
                    <feMergeNode in="blur" />
                    <feMergeNode in="SourceGraphic" />
                  </feMerge>
                </filter>
              </defs>
              <path
                class="track-path"
                d="M30 320 C140 250, 80 120, 200 110 C320 105, 320 260, 420 220 C520 180, 480 60, 340 40"
              />
              <path
                class="track-path secondary"
                d="M60 300 C150 240, 120 150, 210 140 C320 125, 310 260, 420 230 C520 200, 470 80, 330 70"
              />
              <g class="tower-pips">
                <circle cx="140" cy="210" r="12" />
                <circle cx="240" cy="150" r="12" />
                <circle cx="340" cy="200" r="12" />
                <circle cx="420" cy="150" r="12" />
              </g>
              <g class="enemy-orbs">
                <circle cx="110" cy="250" r="6" />
                <circle cx="220" cy="190" r="6" />
                <circle cx="360" cy="160" r="6" />
              </g>
            </svg>
            <div class="track-caption">
              <h2>Immortal Spiral 01</h2>
              <p>
                Each loop is generated from a blended sine and bezier formula,
                guiding enemies along a silky ribbon of geometry. Merge towers to
                reshape the curve and bend trajectories.
              </p>
            </div>
          </div>
          <section class="level-section">
            <header class="subsection-title">Conjecture Set</header>
            <p class="level-intro">
              The opening proofs trace immortal-defense style figure-eights,
              cardioids, and logarithmic spirals. Each path is derived from a
              math-graph expression and rewards towers that can flex their
              formulas mid-curve.
            </p>
            <div class="level-grid" id="level-grid" aria-live="polite"></div>
            <aside class="level-legend">
              <h3>Proof Roadmap</h3>
              <ul class="set-timeline">
                <li class="set-card active-set">
                  <h4>Conjecture Levels 1-5</h4>
                  <p>Speculative math under siege. Examples highlight famous unsolved ideas.</p>
                </li>
                <li class="set-card">
                  <h4>Corollary Levels 6-10</h4>
                  <p>Statements that immediately bloom from the conjecture victories.</p>
                </li>
                <li class="set-card">
                  <h4>Lemma Levels 11-15</h4>
                  <p>Utility proofs and support tactics that bolster the main argument.</p>
                </li>
                <li class="set-card">
                  <h4>Proposition Levels 16-20</h4>
                  <p>Solid but modest claims—expect compound paths and multi-route assaults.</p>
                </li>
                <li class="set-card">
                  <h4>Theorem Levels 21-25</h4>
                  <p>Major revelations guarded by elite enemy archetypes.</p>
                </li>
                <li class="set-card">
                  <h4>Axiom Levels 26-30</h4>
                  <p>Foundational truths; everything loops back to primal glyph geometry.</p>
                </li>
              </ul>
            </aside>
          </section>
          <section class="level-status" aria-live="polite">
            <div class="level-status-banner">
              <span class="status-label">Active Level</span>
              <p class="level-status-value" id="active-level">None selected</p>
            </div>
            <p class="level-status-note">
              Levels persist while you browse other tabs. Return to the Stage to
              continue defending, or leave the level to reset its wave pattern.
            </p>
            <button class="action-button ghost" type="button" id="leave-level" aria-live="off">
              Leave Current Level
            </button>
          </section>
          <section class="enemy-codex">
            <header class="subsection-title">Enemy Codex</header>
            <div class="enemy-grid">
              <article class="card enemy-card">
                <h3>E-Type Glyphs</h3>
                <p>
                  Core foes labeled by trailing zeros. <strong>E1</strong> carries one
                  hit point, while <strong>E3</strong> arrives with <code>10³</code> life.
                  Their waves scale logarithmically between sets.
                </p>
              </article>
              <article class="card enemy-card">
                <h3>Divisors</h3>
                <p>
                  Glyphs that punish high DPS. Damage taken equals
                  <code>1 / DPS</code>, so precision tuning and debuff towers are key.
                </p>
              </article>
              <article class="card enemy-card">
                <h3>Prime Counters</h3>
                <p>
                  Resistant husks that require a fixed number of hits regardless of
                  damage dealt—perfect sparring partners for swarm summoners.
                </p>
              </article>
              <article class="card enemy-card">
                <h3>Reversal Sentinels</h3>
                <p>
                  Vanguard units that, when defeated, sprint backward along the
                  path. Capture them to fight for you with inverted health totals.
                </p>
              </article>
            </div>
          </section>
          <aside class="prestige-card">
            <h2>Prestige Window</h2>
            <p><strong>Ξ Progress:</strong> 10.2 → 17.3</p>
            <p><strong>Reward:</strong> +12% Σ damage</p>
            <button class="action-button" type="button">Prysmatic!</button>
          </aside>
          <div class="stage-footer">
            <button class="play-button" type="button">Play</button>
            <div class="progress">
              <span>Progress to Infinity 58.8%</span>
            </div>
          </div>
        </section>

        <section
          class="panel"
          data-panel="towers"
          id="panel-towers"
          role="tabpanel"
          aria-labelledby="tab-towers"
          hidden
        >
          <header class="panel-header">Towers &amp; Formulae</header>
          <div class="panel-grid">
            <article class="card">
              <header class="tower-header">
                <span class="tower-tier">Tier I</span>
                <h3>α alpha tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">α</span> = X · Y</p>
                <ul class="formula-definition">
                  <li>X → attack power</li>
                  <li>Y → attack speed</li>
                </ul>
                <p class="formula-line result">α = DPS (X × Y)</p>
              </div>
              <ul class="upgrade-list">
                <li>Calibrate X for sharper projectiles (+damage)</li>
                <li>Accelerate Y through harmonic metronomes (+attack speed)</li>
              </ul>
              <footer class="card-footer">Shoots a focused glyph-bullet at the nearest foe.</footer>
            </article>
            <article class="card">
              <header class="tower-header">
                <span class="tower-tier">Tier II</span>
                <h3>β beta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">β</span> = X · Y · Z</p>
                <ul class="formula-definition">
                  <li>X → damage</li>
                  <li>Y → pulses per second</li>
                  <li>Z → pierce (targets per beam)</li>
                </ul>
                <p class="formula-line result">β = DPS (X × Y × Z)</p>
              </div>
              <ul class="upgrade-list">
                <li>Amplify X with resonance crystals</li>
                <li>Stabilize Y to extend sustained beams</li>
                <li>Prism-tune Z to slice through more enemies</li>
              </ul>
              <footer class="card-footer">
                Emits a piercing beam that threads through the ribbon-path.
              </footer>
            </article>
            <article class="card">
              <header class="tower-header">
                <span class="tower-tier">Tier III</span>
                <h3>γ gamma tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">γ</span> = α<sup>½</sup> · β</p>
                <ul class="formula-definition">
                  <li>α → inherited burst damage pulse</li>
                  <li>β → sustained beam resonance</li>
                </ul>
                <p class="formula-line result">Stacks alpha spikes into beta's beam rhythm.</p>
              </div>
              <ul class="upgrade-list">
                <li>Transpose α surges into chaining lightning arcs</li>
                <li>Use β harmonics to slow enemies caught mid-beam</li>
              </ul>
              <footer class="card-footer">Merges α + β into a tempo-shifting conductor with homing bolts.</footer>
            </article>
            <article class="card">
              <header class="tower-header">
                <span class="tower-tier">Tier IV</span>
                <h3>δ delta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">δ</span> = γ · ln(β + 1)</p>
                <ul class="formula-definition">
                  <li>γ → summoning strength for glyph soldiers</li>
                  <li>ln(β + 1) → swarm duration scaling</li>
                </ul>
                <p class="formula-line result">Summons glyph cohorts that inherit γ's damage.</p>
              </div>
              <ul class="upgrade-list">
                <li>Empower soldiers with slowing sigils</li>
                <li>Rally boosts: δ soldiers grant +β% damage to nearby towers</li>
              </ul>
              <footer class="card-footer">Does not attack directly—commands spectral fighters to guard the lane.</footer>
            </article>
            <article class="card">
              <header class="tower-header">
                <span class="tower-tier">Tier V</span>
                <h3>Ω omega tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">Ω</span> = β<sup>α∕10</sup> + δ · β</p>
                <ul class="formula-definition">
                  <li>β<sup>α∕10</sup> → range oscillates with total β output</li>
                  <li>δ · β → damage infused by summoned allies</li>
                </ul>
                <p class="formula-line result">Ω draws power from every β tower on the field.</p>
              </div>
              <ul class="upgrade-list">
                <li>Orbital glyphs deal splash damage equal to 15% of β</li>
                <li>Resonant chant pushes enemies backward when Ω overcharges</li>
              </ul>
              <footer class="card-footer">Signature tower—buffs allies, repositions foes, and anchors endgame builds.</footer>
            </article>
            <article class="card">
              <header class="tower-header">
                <span class="tower-tier">Convergence</span>
                <h3>Merging Logic</h3>
              </header>
              <p>
                Two <strong>α</strong> towers lattice together into a <strong>β</strong> tower,
                fusing burst DPS with piercing beams. Merge β constructs to access
                <strong>γ</strong> conductors, then braid γ into <strong>δ</strong> summoners.
                Ascend every branch to awaken the <strong>Ω</strong> keystone.
              </p>
              <p class="merge-note">
                Upgrades rewrite variables dynamically—boost towers grant additive buffs
                in their radius, splash variants scale with β, and soldier-focused builds
                inherit δ's battlefield control.
              </p>
              <button class="action-button ghost" type="button">Open Upgrade Matrix</button>
            </article>
          </div>
        </section>

        <section
          class="panel"
          data-panel="powder"
          id="panel-powder"
          role="tabpanel"
          aria-labelledby="tab-powder"
          hidden
        >
          <header class="panel-header">Powder Lab</header>
          <div class="panel-grid">
            <article class="card">
              <h3>Sandfall</h3>
              <p>Grains per tick: <code>Ψ(g) = 2.7 · sin(t)</code></p>
              <button class="action-button ghost" type="button">Stabilize Flow</button>
            </article>
            <article class="card">
              <h3>Dune Height</h3>
              <p>Multiplier: <code>Δm = log₂(h + 1)</code></p>
              <button class="action-button ghost" type="button">Survey Ridge</button>
            </article>
            <article class="card">
              <h3>Crystal Powder</h3>
              <p>Powder charge: <code>Q = √(θ · ζ)</code></p>
              <button class="action-button ghost" type="button">Crystallize</button>
            </article>
          </div>
        </section>

        <section
          class="panel"
          data-panel="achievements"
          id="panel-achievements"
          role="tabpanel"
          aria-labelledby="tab-achievements"
          hidden
        >
          <header class="panel-header">Achievements</header>
          <p class="achievement-note">
            Each seal increases powderfall by <strong>+1 grain per minute</strong>.
            Idle minutes are multiplied by unlocked seals and dumped when you return.
          </p>
          <ul class="achievement-list">
            <li>
              <span class="achievement-badge">∞</span>
              <div>
                <p class="achievement-title">First Orbit</p>
                <p class="achievement-sub">Reach loop 10 in the spiral for +1 grain/min.</p>
              </div>
            </li>
            <li>
              <span class="achievement-badge">π</span>
              <div>
                <p class="achievement-title">Circle Seer</p>
                <p class="achievement-sub">Unlock 3 concentric glyph rings for +1 grain/min.</p>
              </div>
            </li>
            <li>
              <span class="achievement-badge">∑</span>
              <div>
                <p class="achievement-title">Series Summoner</p>
                <p class="achievement-sub">Gain 1,000 sandfold stacks and earn +1 grain/min.</p>
              </div>
            </li>
            <li>
              <span class="achievement-badge">ζ</span>
              <div>
                <p class="achievement-title">Zero Hunter</p>
                <p class="achievement-sub">Defeat 100 divisor enemies while under 10 DPS for +1 grain/min.</p>
              </div>
            </li>
            <li>
              <span class="achievement-badge">Φ</span>
              <div>
                <p class="achievement-title">Golden Mentor</p>
                <p class="achievement-sub">Buff 20 towers at once with support auras for +1 grain/min.</p>
              </div>
            </li>
            <li>
              <span class="achievement-badge">Ψ</span>
              <div>
                <p class="achievement-title">Powder Archivist</p>
                <p class="achievement-sub">Reach the fifth sand sigil on the wall and gain +1 grain/min.</p>
              </div>
            </li>
            <li>
              <span class="achievement-badge">Ω</span>
              <div>
                <p class="achievement-title">Keystone Keeper</p>
                <p class="achievement-sub">Merge into your first Ω tower to unlock +1 grain/min.</p>
              </div>
            </li>
            <li>
              <span class="achievement-badge">Δ</span>
              <div>
                <p class="achievement-title">Temporal Sifter</p>
                <p class="achievement-sub">Idle for 60 minutes and collect the multiplied powder surge.</p>
              </div>
            </li>
          </ul>
        </section>

        <section
          class="panel"
          data-panel="options"
          id="panel-options"
          role="tabpanel"
          aria-labelledby="tab-options"
          hidden
        >
          <header class="panel-header">Options &amp; Codex</header>
          <div class="panel-grid">
            <article class="card">
              <h3>Sound</h3>
              <p>Adjust harmonic resonance levels.</p>
              <button class="action-button ghost" type="button">Tune</button>
            </article>
            <article class="card">
              <h3>Visual Theme</h3>
              <p>Switch between monochrome and aurora accents.</p>
              <button class="action-button ghost" type="button">Cycle Palette</button>
            </article>
            <article class="card">
              <h3>Codex</h3>
              <p>Review mathematical lore and formulae.</p>
              <button class="action-button ghost" type="button">Open Codex</button>
            </article>
          </div>
        </section>
      </main>

      <nav class="tab-bar" aria-label="Primary" role="tablist">
        <button
          class="tab-button active"
          data-tab="tower"
          id="tab-tower"
          type="button"
          role="tab"
          aria-label="Tower Stage"
          aria-controls="panel-tower"
          aria-selected="true"
          aria-pressed="true"
        >
          <span class="tab-icon">⌘</span>
          <span class="tab-label">Stage</span>
        </button>
        <button
          class="tab-button"
          data-tab="towers"
          id="tab-towers"
          type="button"
          role="tab"
          aria-label="Towers"
          aria-controls="panel-towers"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">Δ</span>
          <span class="tab-label">Towers</span>
        </button>
        <button
          class="tab-button"
          data-tab="powder"
          id="tab-powder"
          type="button"
          role="tab"
          aria-label="Powder Lab"
          aria-controls="panel-powder"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">⧖</span>
          <span class="tab-label">Powder</span>
        </button>
        <button
          class="tab-button"
          data-tab="achievements"
          id="tab-achievements"
          type="button"
          role="tab"
          aria-label="Achievements"
          aria-controls="panel-achievements"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">★</span>
          <span class="tab-label">Seals</span>
        </button>
        <button
          class="tab-button"
          data-tab="options"
          id="tab-options"
          type="button"
          role="tab"
          aria-label="Options"
          aria-controls="panel-options"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">☰</span>
          <span class="tab-label">Codex</span>
        </button>
      </nav>
    </div>
    <div class="level-overlay" id="level-overlay" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="overlay-panel">
        <p class="overlay-label" id="overlay-level"></p>
        <h2 class="overlay-title" id="overlay-title"></h2>
        <p class="overlay-example" id="overlay-example"></p>
        <p class="overlay-instruction">Tap to enter</p>
      </div>
    </div>
    <script src="./assets/main.js" type="module"></script>
  </body>
</html>
