<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Glyph Defense Idle</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./assets/styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="status-bar">
        <div class="status-group">
          <span class="status-label">Τh Thero</span>
          <span class="status-value status-value--stacked">
            <span id="status-score">0 Th</span>
            <span class="status-multiplier" id="status-score-multiplier">×0</span>
          </span>
        </div>
        <div class="status-group">
          <span class="status-label">Ψ Glyphs</span>
          <span class="status-value" id="status-energy">0</span>
        </div>
        <div class="status-group">
          <span class="status-label">★ Achievements</span>
          <span class="status-value" id="status-flux">0</span>
        </div>
      </header>

      <main class="main-stage">
        <section
          class="panel active"
          data-panel="tower"
          id="panel-tower"
          role="tabpanel"
          aria-labelledby="tab-tower"
        >
          <div class="track-stage">
            <svg
              class="track-canvas"
              viewBox="0 0 560 360"
              role="img"
              aria-labelledby="track-title track-desc"
            >
              <title id="track-title">Whimsical enemy trajectory</title>
              <desc id="track-desc">
                Smooth, ribbon-like path inspired by glyph geometry for tower defense
              </desc>
              <defs>
                <linearGradient id="pathGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="rgba(80, 160, 255, 0.92)" />
                  <stop offset="50%" stop-color="rgba(150, 110, 255, 0.9)" />
                  <stop offset="100%" stop-color="rgba(255, 152, 96, 0.9)" />
                </linearGradient>
                <filter id="glow">
                  <feGaussianBlur stdDeviation="6" result="blur" />
                  <feMerge>
                    <feMergeNode in="blur" />
                    <feMergeNode in="SourceGraphic" />
                  </feMerge>
                </filter>
              </defs>
              <path
                class="track-path"
                d="M28 322 C108 294, 156 222, 236 198 S384 152, 426 224 S522 350, 534 132"
              />
              <path
                class="track-path secondary"
                d="M48 300 C122 276, 168 208, 244 188 S378 148, 418 210 S508 332, 528 136"
              />
              <g class="tower-pips">
                <circle cx="140" cy="210" r="12" />
                <circle cx="240" cy="150" r="12" />
                <circle cx="340" cy="200" r="12" />
                <circle cx="420" cy="150" r="12" />
              </g>
              <g class="enemy-orbs">
                <circle cx="110" cy="250" r="6" />
                <circle cx="220" cy="190" r="6" />
                <circle cx="360" cy="160" r="6" />
              </g>
            </svg>
            <div class="track-caption">
              <h2>Immortal Spiral 01</h2>
              <p>
                Each loop is generated from a blended sine and bezier formula,
                guiding enemies along a silky ribbon of geometry. Merge towers to
                reshape the curve and bend trajectories.
              </p>
            </div>
          </div>
          <section class="playfield-wrapper" aria-live="polite">
            <header class="playfield-header">
              <h3>Active Defense Simulation</h3>
              <p id="playfield-message">
                Select a level to command the defense. Drag glyph chips from your loadout onto the
                plane to lattice towers.
              </p>
            </header>
            <div class="playfield-shell">
              <div
                class="playfield"
                id="playfield"
                role="img"
                aria-label="Interactive glyph defense lane"
              >
                <canvas id="playfield-canvas" width="560" height="360"></canvas>
              </div>
            </div>
            <div class="tower-loadout" id="tower-loadout" aria-label="Tower loadout" role="region">
              <p class="tower-loadout-note" id="tower-loadout-note">
                Select four towers to bring into the defense. Drag the glyph chips onto the plane to
                lattice them; drop a chip atop a matching tower to merge into the next tier.
              </p>
              <div class="tower-loadout-grid" id="tower-loadout-grid" role="list"></div>
            </div>
            <dl class="playfield-hud">
              <div>
                <dt>Wave</dt>
                <dd id="playfield-wave">—</dd>
              </div>
              <div>
                <dt>Core Integrity</dt>
                <dd id="playfield-health">—</dd>
              </div>
              <div>
                <dt>Glyph Energy</dt>
                <dd id="playfield-energy">—</dd>
              </div>
            </dl>
          </section>
          <section class="level-section">
            <header class="subsection-title">Conjecture Set</header>
            <p class="level-intro">
              The opening proofs trace immortal-defense style figure-eights,
              cardioids, and logarithmic spirals. Each path is derived from a
              math-graph expression and rewards towers that can flex their
              formulas mid-curve.
            </p>
            <div class="level-grid" id="level-grid" aria-live="polite"></div>
            <aside class="level-legend">
              <h3>Proof Roadmap</h3>
              <ul class="set-timeline">
                <li class="set-card active-set">
                  <h4>Conjecture Levels 1-5</h4>
                  <p>Speculative math under siege. Examples highlight famous unsolved ideas.</p>
                </li>
                <li class="set-card">
                  <h4>Corollary Levels 6-10</h4>
                  <p>Statements that immediately bloom from the conjecture victories.</p>
                </li>
                <li class="set-card">
                  <h4>Lemma Levels 11-15</h4>
                  <p>Utility proofs and support tactics that bolster the main argument.</p>
                </li>
                <li class="set-card">
                  <h4>Proposition Levels 16-20</h4>
                  <p>Solid but modest claims—expect compound paths and multi-route assaults.</p>
                </li>
                <li class="set-card">
                  <h4>Theorem Levels 21-25</h4>
                  <p>Major revelations guarded by elite enemy archetypes.</p>
                </li>
                <li class="set-card">
                  <h4>Axiom Levels 26-30</h4>
                  <p>Foundational truths; everything loops back to primal glyph geometry.</p>
                </li>
              </ul>
            </aside>
          </section>
          <section class="level-status" aria-live="polite">
            <div class="level-status-banner">
              <span class="status-label">Active Level</span>
              <p class="level-status-value" id="active-level">None selected</p>
            </div>
            <p class="level-status-note">
              Levels persist while you browse other tabs. Return to the Stage to
              continue defending, or leave the level to reset its wave pattern.
            </p>
            <button class="action-button ghost" type="button" id="leave-level" aria-live="off">
              Leave Current Level
            </button>
          </section>
          <section class="enemy-codex">
            <header class="subsection-title">Enemy Codex</header>
            <p class="enemy-codex-note" id="enemy-codex-note">
              Encounter enemies to reveal their entries within the codex tab.
            </p>
          </section>
          <aside class="prestige-card">
            <h2>Prestige Window</h2>
            <p><strong>Ξ Progress:</strong> 10.2 → 17.3</p>
            <p><strong>Reward:</strong> +12% Σ damage</p>
            <button class="action-button" type="button">Prysmatic!</button>
          </aside>
          <div class="stage-footer">
            <div class="stage-controls">
              <button class="play-button" type="button" id="playfield-start" disabled>
                Commence Wave
              </button>
              <div class="control-row" role="group" aria-label="Stage utilities">
                <button class="control-button" type="button" id="playfield-speed">
                  Speed ×1
                </button>
                <button class="control-button" type="button" id="playfield-auto">
                  Auto-lattice α
                </button>
              </div>
              <label class="auto-wave-toggle" for="playfield-auto-wave">
                <input type="checkbox" id="playfield-auto-wave" checked />
                Auto-send next wave
              </label>
            </div>
            <div class="progress">
              <span id="playfield-progress">No active level.</span>
            </div>
          </div>
        </section>

        <section
          class="panel"
          data-panel="towers"
          id="panel-towers"
          role="tabpanel"
          aria-labelledby="tab-towers"
          hidden
        >
          <header class="panel-header">Towers &amp; Formulae</header>
          <div class="panel-grid">
            <article class="card" data-tower-id="alpha">
              <header class="tower-header">
                <span class="tower-tier">Tier I</span>
                <h3>α alpha tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">α</span> = X · Y</p>
                <ul class="formula-definition">
                  <li>X → attack power</li>
                  <li>Y → attack speed</li>
                </ul>
                <p class="formula-line result">α = DPS (X × Y)</p>
              </div>
              <ul class="upgrade-list">
                <li>Calibrate X for sharper projectiles (+damage)</li>
                <li>Accelerate Y through harmonic metronomes (+attack speed)</li>
              </ul>
              <footer class="card-footer">Shoots a focused glyph-bullet at the nearest foe.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="alpha">
                Equip α
              </button>
            </article>
            <article class="card" data-tower-id="beta">
              <header class="tower-header">
                <span class="tower-tier">Tier II</span>
                <h3>β beta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">β</span> = X · Y · Z</p>
                <ul class="formula-definition">
                  <li>X → damage</li>
                  <li>Y → pulses per second</li>
                  <li>Z → pierce (targets per beam)</li>
                </ul>
                <p class="formula-line result">β = DPS (X × Y × Z)</p>
              </div>
              <ul class="upgrade-list">
                <li>Amplify X with resonance crystals</li>
                <li>Stabilize Y to extend sustained beams</li>
                <li>Prism-tune Z to slice through more enemies</li>
              </ul>
              <footer class="card-footer">
                Emits a piercing beam that threads through the ribbon-path.
              </footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="beta">
                Equip β
              </button>
            </article>
            <article class="card" data-tower-id="gamma">
              <header class="tower-header">
                <span class="tower-tier">Tier III</span>
                <h3>γ gamma tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">γ</span> = α<sup>½</sup> · β</p>
                <ul class="formula-definition">
                  <li>α → inherited burst damage pulse</li>
                  <li>β → sustained beam resonance</li>
                </ul>
                <p class="formula-line result">Stacks alpha spikes into beta's beam rhythm.</p>
              </div>
              <ul class="upgrade-list">
                <li>Transpose α surges into chaining lightning arcs</li>
                <li>Use β harmonics to slow enemies caught mid-beam</li>
              </ul>
              <footer class="card-footer">Merges α + β into a tempo-shifting conductor with homing bolts.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="gamma">
                Equip γ
              </button>
            </article>
            <article class="card" data-tower-id="delta">
              <header class="tower-header">
                <span class="tower-tier">Tier IV</span>
                <h3>δ delta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">δ</span> = γ · ln(β + 1)</p>
                <ul class="formula-definition">
                  <li>γ → summoning strength for glyph soldiers</li>
                  <li>ln(β + 1) → swarm duration scaling</li>
                </ul>
                <p class="formula-line result">Summons glyph cohorts that inherit γ's damage.</p>
              </div>
              <ul class="upgrade-list">
                <li>Empower soldiers with slowing sigils</li>
                <li>Rally boosts: δ soldiers grant +β% damage to nearby towers</li>
              </ul>
              <footer class="card-footer">Does not attack directly—commands spectral fighters to guard the lane.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="delta">
                Equip δ
              </button>
            </article>
            <article class="card" data-tower-id="epsilon">
              <header class="tower-header">
                <span class="tower-tier">Tier V</span>
                <h3>ε epsilon tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">
                  <span class="formula-symbol">ε</span> = lim<sub>h→0</sub>
                  (σ(t + h) − σ(t)) ∕ h
                </p>
                <ul class="formula-definition">
                  <li>σ(t) → aura intensity sampled from nearby allies</li>
                  <li>h → infinitesimal stride keyed to enemy motion</li>
                </ul>
                <p class="formula-line result">Derivative bursts fire whenever an allied aura shifts.</p>
              </div>
              <ul class="upgrade-list">
                <li>Stabilize σ(t) to convert pulses into restorative shielding</li>
                <li>Spike the derivative to unleash splash equal to aura variance</li>
              </ul>
              <footer class="card-footer">Differentiates harmonic drift into rapid glyph needles.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="epsilon">
                Equip ε
              </button>
            </article>
            <article class="card" data-tower-id="zeta">
              <header class="tower-header">
                <span class="tower-tier">Tier VI</span>
                <h3>ζ zeta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">
                  <span class="formula-symbol">ζ</span> = Σ<sub>n=1</sub><sup>N</sup> n<sup>−s</sup>
                </p>
                <ul class="formula-definition">
                  <li>N → partial sum length scales with total glyph towers</li>
                  <li>s → 1 + ω<sub>progress</sub>/10 tunes harmonic focus</li>
                </ul>
                <p class="formula-line result">Accumulates harmonic charge, then releases cascading splash.</p>
              </div>
              <ul class="upgrade-list">
                <li>Raise N with support anchors to widen the resonance fan</li>
                <li>Shift s toward 1/2 to concentrate damage on elite glyphs</li>
              </ul>
              <footer class="card-footer">Turns harmonic sums into rolling resonance detonations.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="zeta">
                Equip ζ
              </button>
            </article>
            <article class="card" data-tower-id="eta">
              <header class="tower-header">
                <span class="tower-tier">Tier VII</span>
                <h3>η eta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">
                  <span class="formula-symbol">η</span> = (1 − 2<sup>1−s</sup>) · ζ(s)
                </p>
                <ul class="formula-definition">
                  <li>1 − 2<sup>1−s</sup> → alternating parity cancels enemy resistances</li>
                  <li>ζ(s) → inherited harmonic pulse from prior zeta lattices</li>
                </ul>
                <p class="formula-line result">Alternating resonance slashes armor and amplifies allies.</p>
              </div>
              <ul class="upgrade-list">
                <li>Lock parity to freeze evasive foes within the resonance window</li>
                <li>Share η's alternating field with δ soldiers to shatter shields</li>
              </ul>
              <footer class="card-footer">Extends zeta's song into alternating series that debuff invaders.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="eta">
                Equip η
              </button>
            </article>
            <article class="card" data-tower-id="theta">
              <header class="tower-header">
                <span class="tower-tier">Tier VIII</span>
                <h3>θ theta tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line">
                  <span class="formula-symbol">θ</span> = Σ<sub>n=-∞</sub><sup>∞</sup> e<sup>−πn²t</sup>
                </p>
                <ul class="formula-definition">
                  <li>t → lane temperature set by enemy speed and powder bonuses</li>
                  <li>e<sup>−πn²t</sup> → gaussian pulses that warp path geometry</li>
                </ul>
                <p class="formula-line result">Theta waves bend the lane, slowing foes caught in the lattice.</p>
              </div>
              <ul class="upgrade-list">
                <li>Cool the lane to thicken gaussian walls and extend slow duration</li>
                <li>Heat pulses to reflect enemies backward along mirrored paths</li>
              </ul>
              <footer class="card-footer">Projects modular heatmaps that reshape the curve around your towers.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="theta">
                Equip θ
              </button>
            </article>
            <article class="card" data-tower-id="omega">
              <header class="tower-header">
                <span class="tower-tier">Tier IX</span>
                <h3>Ω omega tower</h3>
              </header>
              <div class="formula-block">
                <p class="formula-line"><span class="formula-symbol">Ω</span> = θ · β<sup>α∕10</sup> + δ · ζ</p>
                <ul class="formula-definition">
                  <li>θ → modular waves inherited from theta distort path timing</li>
                  <li>β<sup>α∕10</sup> → range oscillates with total β output</li>
                  <li>δ · ζ → summoned allies feed harmonic splash into Ω</li>
                </ul>
                <p class="formula-line result">Ω draws power from the entire harmonic ladder, stabilizing every glyph.</p>
              </div>
              <ul class="upgrade-list">
                <li>Orbital glyphs deal splash damage equal to 20% of the ζ resonance</li>
                <li>Resonant chant pushes enemies backward when θ waves fully align</li>
              </ul>
              <footer class="card-footer">Signature tower—buffs allies, repositions foes, and anchors endgame builds.</footer>
              <button class="tower-equip-button" type="button" data-tower-toggle="omega">
                Equip Ω
              </button>
            </article>
            <article class="card">
              <header class="tower-header">
                <span class="tower-tier">Convergence</span>
                <h3>Merging Logic</h3>
              </header>
              <p>
                Two <strong>α</strong> towers lattice together into a <strong>β</strong> tower,
                fusing burst DPS with piercing beams. Merge β constructs to access
                <strong>γ</strong> conductors, braid γ into <strong>δ</strong> summoners, then
                differentiate into <strong>ε</strong> through the harmonic ladder of
                <strong>ζ</strong>, <strong>η</strong>, and <strong>θ</strong>.
                Ascend every branch to awaken the <strong>Ω</strong> keystone.
              </p>
              <p class="merge-note">
                Upgrades rewrite variables dynamically—boost towers grant additive buffs
                in their radius, splash variants scale with β, and soldier-focused builds
                inherit δ's battlefield control.
              </p>
              <button
                class="action-button ghost"
                type="button"
                id="open-upgrade-matrix"
                aria-haspopup="dialog"
                aria-controls="upgrade-matrix-overlay"
              >
                Open Upgrade Matrix
              </button>
            </article>
          </div>
        </section>

        <section
          class="panel"
          data-panel="powder"
          id="panel-powder"
          role="tabpanel"
          aria-labelledby="tab-powder"
          hidden
        >
          <header class="panel-header">Powder Lab</header>
          <p class="powder-intro">
            Channel falling-sand experiments to braid bonuses back into the tower core.
            Each ritual manipulates flow rates, dune topology, or crystalline charge to
            accelerate Σ score, Δ energy, and λ flux.
          </p>
          <section class="panel-grid powder-summary">
            <article class="card powder-overview">
              <h3>Flux Overview</h3>
              <dl class="powder-metrics">
                <div>
                  <dt>Total Multiplier</dt>
                  <dd id="powder-total-multiplier">×1.00</dd>
                </div>
                <div>
                  <dt>Sandfall Bonus</dt>
                  <dd id="powder-sand-bonus">+0.00%</dd>
                </div>
                <div>
                  <dt>Dune Channeling</dt>
                  <dd id="powder-dune-bonus">+0.00%</dd>
                </div>
                <div>
                  <dt>Crystal Resonance</dt>
                  <dd id="powder-crystal-bonus">+0.00%</dd>
                </div>
              </dl>
            </article>
            <article class="card powder-sigils-card">
              <h3>Sigil Ladder</h3>
              <p>
                Powder height illuminates etched glyphs. Each rung unlocks new research rites
                once the total multiplier meets or exceeds its mark.
              </p>
              <ul class="powder-sigil-list" id="powder-sigil-list">
                <li data-sigil-threshold="1.05">
                  <span class="sigil-name">Boundary Sigil</span>
                  <span class="sigil-note">Stabilize the sandfall to breach ×1.05 flow.</span>
                </li>
                <li data-sigil-threshold="1.15">
                  <span class="sigil-name">Dune Crest Sigil</span>
                  <span class="sigil-note">Raise h to carve channels and reach ×1.15.</span>
                </li>
                <li data-sigil-threshold="1.35">
                  <span class="sigil-name">Crystal Harmonic Sigil</span>
                  <span class="sigil-note">Store a full lattice of charges to strike ×1.35.</span>
                </li>
                <li data-sigil-threshold="1.5">
                  <span class="sigil-name">Archive Sigil</span>
                  <span class="sigil-note">Sustain every ritual to engrave ×1.50 and beyond.</span>
                </li>
              </ul>
            </article>
          </section>
          <section class="powder-stage" aria-label="Powderfall basin">
            <article class="card powder-simulation">
              <h3>Powderfall Basin</h3>
              <div class="powder-basin" id="powder-basin">
                <div class="powder-wall powder-wall-left" id="powder-wall-left" aria-hidden="true">
                  <span
                    class="powder-glyph"
                    data-powder-glyph
                    data-height-threshold="0.2"
                    data-wall="left"
                  >∑</span>
                  <span
                    class="powder-glyph"
                    data-powder-glyph
                    data-height-threshold="0.45"
                    data-wall="left"
                  >Δ</span>
                  <span
                    class="powder-glyph"
                    data-powder-glyph
                    data-height-threshold="0.7"
                    data-wall="left"
                  >Φ</span>
                  <div class="powder-wall-marker" id="powder-wall-marker" data-height="Peak 0.00" aria-hidden="true"></div>
                  <div
                    class="powder-wall-marker powder-crest-marker"
                    id="powder-crest-marker"
                    data-height="Crest 0.00"
                    aria-hidden="true"
                  ></div>
                </div>
                <canvas
                  id="powder-canvas"
                  width="240"
                  height="320"
                  role="img"
                  aria-label="Powderfall basin simulation"
                ></canvas>
                <div class="powder-wall powder-wall-right" id="powder-wall-right" aria-hidden="true">
                  <span
                    class="powder-glyph"
                    data-powder-glyph
                    data-height-threshold="0.33"
                    data-wall="right"
                  >Ψ</span>
                  <span
                    class="powder-glyph"
                    data-powder-glyph
                    data-height-threshold="0.58"
                    data-wall="right"
                  >Ω</span>
                  <span
                    class="powder-glyph"
                    data-powder-glyph
                    data-height-threshold="0.85"
                    data-wall="right"
                  >ℵ</span>
                </div>
              </div>
              <p class="powder-footnote" id="powder-simulation-note">
                Captured crest: 0.0% full · dune height h = 1.00 · largest grain —.
              </p>
            </article>
          </section>

          <div class="panel-grid powder-grid">
            <article class="card">
              <h3>Sandfall</h3>
              <p>
                Grains per tick:
                <code id="powder-sandfall-formula">Ψ(g) = 2.7 · sin(t)</code>
              </p>
              <p class="powder-footnote" id="powder-sandfall-note">
                Crest is unstable—powder drifts off the board.
              </p>
              <button
                class="action-button ghost"
                type="button"
                data-powder-action="sandfall"
              >
                Stabilize Flow
              </button>
            </article>
            <article class="card">
              <h3>Dune Height</h3>
              <p>
                Multiplier:
                <code id="powder-dune-formula">Δm = log₂(h + 1)</code>
              </p>
              <p class="powder-footnote" id="powder-dune-note">
                Survey ridges to raise <em>h</em> and amplify energy lanes.
              </p>
              <button
                class="action-button ghost"
                type="button"
                data-powder-action="dune"
              >
                Survey Ridge
              </button>
            </article>
            <article class="card">
              <h3>Crystal Powder</h3>
              <p>
                Powder charge:
                <code id="powder-crystal-formula">Q = √(θ · ζ)</code>
              </p>
              <p class="powder-footnote" id="powder-crystal-note">
                Crystal resonance is idle—no pulse prepared.
              </p>
              <button
                class="action-button ghost"
                type="button"
                data-powder-action="crystal"
              >
                Crystallize (0/3)
              </button>
            </article>
            <article class="card powder-ledger">
              <h3>Powderfall Ledger</h3>
              <dl class="powder-ledger-grid">
                <div>
                  <dt>Base Σ Rate</dt>
                  <dd id="powder-ledger-base-score">2.75 QDe/s</dd>
                </div>
                <div>
                  <dt>Current Σ Rate</dt>
                  <dd id="powder-ledger-current-score">2.75 QDe/s</dd>
                </div>
                <div>
                  <dt>Current Flux</dt>
                  <dd id="powder-ledger-flux">+375 Powder/min</dd>
                </div>
                <div>
                  <dt>Current Energy</dt>
                  <dd id="powder-ledger-energy">+575 TD/s</dd>
                </div>
              </dl>
              <p class="powder-footnote">
                Ledger values account for all active powder rituals and crystal surges.
              </p>
            </article>
            <article class="card powder-log-card">
              <h3>Lab Chronicle</h3>
              <p class="powder-footnote">Recent experiments echo here for quick review.</p>
              <ul class="powder-log" id="powder-log" aria-live="polite" aria-label="Recent powder experiments"></ul>
              <p class="powder-log-empty" id="powder-log-empty">No experiments recorded yet.</p>
            </article>
          </div>
        </section>

        <section
          class="panel"
          data-panel="achievements"
          id="panel-achievements"
          role="tabpanel"
          aria-labelledby="tab-achievements"
          hidden
        >
          <header class="panel-header">Achievements</header>
          <p class="achievement-note">
            Each seal increases powderfall by <strong>+1 grain per minute</strong>.
            Idle minutes are multiplied by unlocked seals and dumped when you return.
          </p>
          <ul class="achievement-list">
            <li data-achievement-id="first-orbit">
              <span class="achievement-badge">∞</span>
              <div>
                <p class="achievement-title">First Orbit</p>
                <p class="achievement-sub">
                  Seal the Lemniscate Hypothesis once to prove you can hold the spiral.
                </p>
                <p class="achievement-status">Locked · +1 powder/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="circle-seer">
              <span class="achievement-badge">π</span>
              <div>
                <p class="achievement-title">Circle Seer</p>
                <p class="achievement-sub">
                  Maintain three α towers at once—concentric glyph rings stabilize your vision.
                </p>
                <p class="achievement-status">Locked · +1 powder/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="series-summoner">
              <span class="achievement-badge">∑</span>
              <div>
                <p class="achievement-title">Series Summoner</p>
                <p class="achievement-sub">
                  Drive the powder rituals to a ×1.25 total multiplier or higher.
                </p>
                <p class="achievement-status">Locked · +1 powder/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="zero-hunter">
              <span class="achievement-badge">ζ</span>
              <div>
                <p class="achievement-title">Zero Hunter</p>
                <p class="achievement-sub">
                  Defeat 30 invading glyphs—zeros fall when persistence converges.
                </p>
                <p class="achievement-status">Locked · +1 powder/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="golden-mentor">
              <span class="achievement-badge">Φ</span>
              <div>
                <p class="achievement-title">Golden Mentor</p>
                <p class="achievement-sub">
                  Auto-lattice every suggested anchor to teach the grid your golden ratios.
                </p>
                <p class="achievement-status">Locked · +1 powder/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="powder-archivist">
              <span class="achievement-badge">Ψ</span>
              <div>
                <p class="achievement-title">Powder Archivist</p>
                <p class="achievement-sub">
                  Illuminate three sand sigils on the wall to archive the dunes.
                </p>
                <p class="achievement-status">Locked · +1 powder/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="keystone-keeper">
              <span class="achievement-badge">Ω</span>
              <div>
                <p class="achievement-title">Keystone Keeper</p>
                <p class="achievement-sub">
                  Complete any idle auto-run to bind a keystone into the archives.
                </p>
                <p class="achievement-status">Locked · +1 powder/min on unlock.</p>
              </div>
            </li>
            <li data-achievement-id="temporal-sifter">
              <span class="achievement-badge">Δ</span>
              <div>
                <p class="achievement-title">Temporal Sifter</p>
                <p class="achievement-sub">
                  Maintain idle auto-runs for 10 cumulative minutes and sift the bonus powder.
                </p>
                <p class="achievement-status">Locked · +1 powder/min on unlock.</p>
              </div>
            </li>
          </ul>
        </section>

        <section
          class="panel"
          data-panel="options"
          id="panel-options"
          role="tabpanel"
          aria-labelledby="tab-options"
          hidden
        >
          <header class="panel-header">Options &amp; Codex</header>
          <div class="panel-grid">
            <article class="card">
              <h3>Sound</h3>
              <p>Adjust harmonic resonance levels.</p>
              <button class="action-button ghost" type="button">Tune</button>
            </article>
            <article class="card">
              <h3>Visual Theme</h3>
              <p>Switch between monochrome and aurora accents.</p>
              <button class="action-button ghost" type="button">Cycle Palette</button>
            </article>
            <article class="card">
              <h3>Codex</h3>
              <p>Review mathematical lore and formulae.</p>
              <button class="action-button ghost" type="button">Open Codex</button>
            </article>
          </div>
          <section class="enemy-codex" aria-live="polite">
            <header class="subsection-title">Enemy Codex</header>
            <p class="enemy-codex-note" id="enemy-codex-empty">Encounter enemies to unlock their entries.</p>
            <div class="enemy-grid" id="enemy-codex-list" role="list"></div>
          </section>
        </section>
      </main>

      <nav class="tab-bar" aria-label="Primary" role="tablist">
        <button
          class="tab-button active"
          data-tab="tower"
          id="tab-tower"
          type="button"
          role="tab"
          aria-label="Tower Stage"
          aria-controls="panel-tower"
          aria-selected="true"
          aria-pressed="true"
        >
          <span class="tab-icon">⌘</span>
          <span class="tab-label">Stage</span>
        </button>
        <button
          class="tab-button"
          data-tab="towers"
          id="tab-towers"
          type="button"
          role="tab"
          aria-label="Towers"
          aria-controls="panel-towers"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">Δ</span>
          <span class="tab-label">Towers</span>
        </button>
        <button
          class="tab-button"
          data-tab="powder"
          id="tab-powder"
          type="button"
          role="tab"
          aria-label="Powder Lab"
          aria-controls="panel-powder"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">⧖</span>
          <span class="tab-label">Powder</span>
        </button>
        <button
          class="tab-button"
          data-tab="achievements"
          id="tab-achievements"
          type="button"
          role="tab"
          aria-label="Achievements"
          aria-controls="panel-achievements"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">★</span>
          <span class="tab-label">Seals</span>
        </button>
        <button
          class="tab-button"
          data-tab="options"
          id="tab-options"
          type="button"
          role="tab"
          aria-label="Options"
          aria-controls="panel-options"
          aria-selected="false"
          aria-pressed="false"
        >
          <span class="tab-icon">☰</span>
          <span class="tab-label">Codex</span>
        </button>
      </nav>
    </div>
    <div
      class="level-overlay upgrade-overlay"
      id="upgrade-matrix-overlay"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
      aria-labelledby="upgrade-matrix-title"
    >
      <div class="overlay-panel">
        <button
          class="overlay-close"
          type="button"
          data-overlay-close
          aria-label="Close upgrade matrix"
        >
          &times;
        </button>
        <p class="overlay-label">Merge Reference</p>
        <h2 class="overlay-title" id="upgrade-matrix-title">Upgrade Matrix</h2>
        <p class="overlay-example">
          Review how glyph towers ascend, their base lattice costs, and the form unlocked by each merge.
        </p>
        <div class="upgrade-matrix-grid" id="upgrade-matrix-grid" role="list"></div>
        <p class="overlay-instruction">Tap outside or press Esc to close.</p>
      </div>
    </div>
    <div class="level-overlay" id="level-overlay" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="overlay-panel">
        <p class="overlay-label" id="overlay-level"></p>
        <h2 class="overlay-title" id="overlay-title"></h2>
        <p class="overlay-example" id="overlay-example"></p>
        <dl class="overlay-metrics">
          <div>
            <dt>Mode</dt>
            <dd id="overlay-mode">—</dd>
          </div>
          <div>
            <dt>Run Length</dt>
            <dd id="overlay-duration">—</dd>
          </div>
          <div>
            <dt>Rewards</dt>
            <dd id="overlay-rewards">—</dd>
          </div>
        </dl>
        <p class="overlay-last" id="overlay-last">No attempts yet.</p>
        <p class="overlay-instruction">Tap to enter</p>
      </div>
    </div>
    <script src="./assets/main.js" defer></script>
  </body>
</html>
